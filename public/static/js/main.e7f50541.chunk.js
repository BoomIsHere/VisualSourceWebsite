(this.webpackJsonppolytopia=this.webpackJsonppolytopia||[]).push([[0],{140:function(e,t,a){},144:function(e){e.exports=JSON.parse('{"domain":"visualsource.auth0.com","clientId":"lMZtNGOs7ZZijZT2Xk0HChwHvyqRSHJX"}')},245:function(e,t,a){e.exports=a.p+"static/media/background_game.b879c134.webp"},246:function(e,t,a){e.exports=a.p+"static/media/field.820a5de2.obj"},247:function(e,t,a){e.exports=a.p+"static/media/field.bd606281.mtl"},248:function(e,t,a){e.exports=a.p+"static/media/fruit_one.401782fb.obj"},249:function(e,t,a){e.exports=a.p+"static/media/fruit_one.deedf5c9.mtl"},250:function(e,t,a){e.exports=a.p+"static/media/ocean.49960e7c.obj"},251:function(e,t,a){e.exports=a.p+"static/media/ocean_none.e646e666.obj"},252:function(e,t,a){e.exports=a.p+"static/media/ocean_one.1149f12f.obj"},253:function(e,t,a){e.exports=a.p+"static/media/ocean_two.8478a460.obj"},254:function(e,t,a){e.exports=a.p+"static/media/ocean_two_b.5f12e9cc.obj"},255:function(e,t,a){e.exports=a.p+"static/media/ocean_three.09f7749a.obj"},256:function(e,t,a){e.exports=a.p+"static/media/ocean.9289348b.mtl"},257:function(e,t,a){e.exports=a.p+"static/media/ocean_none.d0d89c1d.mtl"},258:function(e,t,a){e.exports=a.p+"static/media/ocean_one.f49bda95.mtl"},259:function(e,t,a){e.exports=a.p+"static/media/ocean_two.40654d41.mtl"},260:function(e,t,a){e.exports=a.p+"static/media/ocean_two_b.38e20ff2.mtl"},261:function(e,t,a){e.exports=a.p+"static/media/ocean_three.ff5600a1.mtl"},262:function(e,t,a){e.exports=a.p+"static/media/water.065725eb.obj"},263:function(e,t,a){e.exports=a.p+"static/media/water_none.bd934e57.obj"},264:function(e,t,a){e.exports=a.p+"static/media/water_one.34ff3246.obj"},265:function(e,t,a){e.exports=a.p+"static/media/water_two.0db41b72.obj"},266:function(e,t,a){e.exports=a.p+"static/media/water_two_b.7b4c02ee.obj"},267:function(e,t,a){e.exports=a.p+"static/media/water_three.7dfcfd72.obj"},268:function(e,t,a){e.exports=a.p+"static/media/water.b6d02e43.mtl"},269:function(e,t,a){e.exports=a.p+"static/media/water_none.a0876c1d.mtl"},270:function(e,t,a){e.exports=a.p+"static/media/water_one.14ed2016.mtl"},271:function(e,t,a){e.exports=a.p+"static/media/water_two.504cbe72.mtl"},272:function(e,t,a){e.exports=a.p+"static/media/water_two_b.cde0d92a.mtl"},273:function(e,t,a){e.exports=a.p+"static/media/water_three.a56fb38c.mtl"},274:function(e,t,a){e.exports=a.p+"static/media/cloud.1337cfe0.obj"},275:function(e,t,a){e.exports=a.p+"static/media/cloud.47b98894.mtl"},276:function(e,t,a){e.exports=a.p+"static/media/slector.a35f20df.obj"},277:function(e,t,a){e.exports=a.p+"static/media/slector.0eb39234.mtl"},278:function(e,t,a){e.exports=a.p+"static/media/tree_one.9a0a07b7.obj"},279:function(e,t,a){e.exports=a.p+"static/media/tree_two.ddb2b1b0.obj"},280:function(e,t,a){e.exports=a.p+"static/media/tree_one.9bf4606c.mtl"},281:function(e,t,a){e.exports=a.p+"static/media/tree_two.bed7a1fa.mtl"},282:function(e,t,a){e.exports=a.p+"static/media/arrow_perv.1448615b.svg"},283:function(e,t,a){e.exports=a.p+"static/media/sign-in.2d188652.svg"},284:function(e,t,a){e.exports=a.p+"static/media/sign-out.80e1990a.svg"},285:function(e,t,a){e.exports=a.p+"static/media/plus.785b6480.svg"},286:function(e,t,a){e.exports=a.p+"static/media/arrow_down.84da5a29.svg"},290:function(e,t,a){e.exports=a(643)},550:function(e,t){},552:function(e,t){},587:function(e,t){},588:function(e,t){},62:function(e,t,a){},630:function(e,t,a){},631:function(e,t,a){},632:function(e,t,a){},633:function(e,t,a){},634:function(e,t,a){},635:function(e,t,a){},636:function(e,t,a){},637:function(e,t,a){},638:function(e,t,a){},639:function(e,t,a){},640:function(e,t,a){},641:function(e,t,a){},642:function(e,t,a){},643:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(42),o=a.n(i),c=a(16),l=a.n(c),s=a(233),u=a(64),m=a(52),d=a(17),p=a.n(d),h=a(26),f=a(11),g=a(288),E=a(236),y=a.n(E),b=a(27);function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Message",t={position:"top-right",title:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Title"};switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null){case"info":b.Message.info(e,5,t);break;case"error":b.Message.error(e,5,t);break;case"success":b.Message.success(e,5,t);break;default:b.Message.show(e,5,t)}}var w,O,k,x=function(){return l.a.naviagte("/")},j=Object(n.createContext)(),S=function(){return Object(n.useContext)(j)},T=function(e){var t=e.children,a=e.onRedirectCallback,i=void 0===a?x:a,o=Object(g.a)(e,["children","onRedirectCallback"]),c=Object(n.useState)(),l=Object(f.a)(c,2),s=l[0],u=l[1],m=Object(n.useState)(),d=Object(f.a)(m,2),E=d[0],b=d[1],w=Object(n.useState)(),O=Object(f.a)(w,2),k=O[0],S=O[1],T=Object(n.useState)(!0),N=Object(f.a)(T,2),A=N[0],C=N[1],P=Object(n.useState)(!1),M=Object(f.a)(P,2),R=M[0],_=M[1];Object(n.useEffect)((function(){(function(){var e=Object(h.a)(p.a.mark((function e(){var t,a,n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y()(o);case 2:if(t=e.sent,S(t),!window.location.search.includes("code=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:a=e.sent,n=a.appState,i(n);case 10:return e.next=12,t.isAuthenticated();case 12:if(r=e.sent,u(r),!r){e.next=26;break}return e.next=17,t.getUser();case 17:return c=e.sent,b(c),e.t0=v,e.t1="Welcome ",e.next=23,c.name;case 23:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)(e.t3,"Login","success");case 26:C(!1);case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var I=function(){var e=Object(h.a)(p.a.mark((function e(){var t,a,n=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},_(!0),e.prev=2,e.next=5,k.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),v("There was a error when logging in!","Login Error","error");case 10:return e.prev=10,_(!1),e.finish(10);case 13:return e.next=15,k.getUser();case 15:if(a=e.sent,b(a),!a){e.next=26;break}return u(!0),e.t1=v,e.t2="Welcome ",e.next=23,a.name;case 23:e.t3=e.sent,e.t4=e.t2.concat.call(e.t2,e.t3),(0,e.t1)(e.t4,"Login","success");case 26:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,k.handleRedirectCallback();case 3:return e.next=5,k.getUser();case 5:t=e.sent,C(!1),u(!0),b(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(j.Provider,{value:{isAuthenticated:s,user:E,loading:A,popupOpen:R,loginWithPopup:I,handleRedirectCallback:L,getIdTokenClaims:function(){return k.getIdTokenClaims.apply(k,arguments)},loginWithRedirect:function(){return k.loginWithRedirect.apply(k,arguments)},getTokenSilently:function(){return k.getTokenSilently.apply(k,arguments)},getTokenWithPopup:function(){return k.getTokenWithPopup.apply(k,arguments)},logout:function(){return k.logout.apply(k,arguments)}}},t)},N=a(3),A=a(4),C=a(9),P=a(6),M=a(10),R=a(237),_=a.n(R),I=a(2),L=(function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.parse(localStorage.getItem("save-sp")));case 1:case"end":return e.stop()}}),e)})))}(),function(){return!!localStorage.getItem("save-sp")}),G=function(){return JSON.parse(localStorage.getItem("save-mp"))},W=function(){return null!==localStorage.getItem("save-mp")},D={default:{sound_effects:!0,ambience:!0,tribe_music:!0,suggestions:!0,info_on_build:!0,confirm_turn:!0,volume:100},get:function(){return JSON.parse(localStorage.getItem("settings"))},set:function(e,t){return localStorage.setItem("settings",JSON.stringify(Object.assign({},t,e))),JSON.parse(localStorage.getItem("settings"))},remove:function(){localStorage.removeItem("settings")},isVaild:function(){return null!==localStorage.getItem("settings")||(localStorage.setItem("settings",JSON.stringify(D.default)),!1)}},U=function(){for(var e={},t=l.a.getCurrentURI().replace(/\/(.*)\/(.*)\/(.*)\?/,"").replace(/\/(.*)\/(.*)\?/,"").replace(/\/(.*)\?/,"").split(/=|&/),a=0,n=[],r=0;r<t.length/2;r++)t[a].includes("[]")?(n.push(t[a+1]),Object.assign(e,JSON.parse('{"'.concat(t[a].replace("[]",""),'":').concat(JSON.stringify(n),"}")))):Object.assign(e,JSON.parse('{"'.concat(t[a],'":"').concat(t[a+1],'"}'))),a+=2;return e},B={data:{},load:function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/config/config.json").then((function(e){return e.json()}));case 3:t=e.sent,B.data=t,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to load config");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},q={showingView:!1,preId:0},z=function e(t){var a=this;Object(N.a)(this,e),this.Water=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=a.models.water,o=new I.Mesh(i.geometry[n],i.material[n]);return o.name="water_"+n,o.cursor="pointer",o.on("click",(function(e){!q.showingView&&(e.data.target.userData.click<1||q.preId!==e.data.target.id)?(l.a.navigate("/game/view/water",{queryParams:{blockId:e.data.target.id}}),e.data.target.userData.click++,q.preId=e.data.target.id):(l.a.navigate("/game"),e.data.target.userData.click=0)})),o.userData={type:"Water",faction:t,children:[],canBuild:{},variation:n,parent:null,click:0},o.position.set(e.x,e.y,e.z),o.rotateY(Math.PI*r/180),o},this.Field=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=a.models.field,i=new I.Mesh(r.geometry[0],r.material[0]);return i.name="field_".concat(n),i.cursor="pointer",i.on("click",(function(e){!q.showingView&&(e.data.target.userData.click<1||q.preId!==e.data.target.id)?(l.a.navigate("/game/view/field",{queryParams:{blockId:e.data.target.id}}),e.data.target.userData.click++,q.preId=e.data.target.id):(l.a.navigate("/game"),e.data.target.userData.click=0)})),i.userData={type:"Field",faction:t,children:[],canBuild:{fram:{cost:0}},variation:n,parent:null,click:0},i.position.set(e.x,e.y,e.z),i},this.Ocean=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=a.models.ocean,o=new I.Mesh(i.geometry[n],i.material[n]);return o.name="ocean_"+n,o.cursor="pointer",o.on("click",(function(e){!q.showingView&&(e.data.target.userData.click<1||q.preId!==e.data.target.id)?(l.a.navigate("/game/view/ocean",{queryParams:{blockId:e.data.target.id}}),e.data.target.userData.click++,q.preId=e.data.target.id):(l.a.navigate("/game"),e.data.target.userData.click=0)})),o.userData={type:"Ocean",faction:t,children:[],canBuild:{},variation:n,parent:null,click:0},o.position.set(e.x,e.y,e.z),o.rotateY(Math.PI*r/180),o},this.Tree=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=a.models.tree,i=new I.Mesh(r.geometry[n],r.material[n]);return i.cursor="pointer",i.on("click",(function(e){console.log(e)})),i.name="tree_"+n,i.userData={type:"TREE",faction:t,attached:[],canBuild:[],variation:n},i.position.set(e.x,e.y,e.z),i},this.Wall=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=a.models.wall,o=new I.Mesh(i.geometry[n],i.material[n]);return o.name="wall_"+n,o.cursor="pointer",o.on("click",(function(e){console.log(e)})),o.userData={type:"WALL",faction:t,attached:[],canBuild:[],variation:n},o.position.set(e.x,e.y,e.z),o.rotateY(Math.PI*r/180),o},this.Fruit=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=a.models.fruit,i=new I.Mesh(r.geometry[n],r.material[n]);return i.name="fruit_"+n,i.cursor="pointer",i.on("click",(function(e){console.log(e)})),i.userData={type:"Fruit",faction:t,variation:n,parent:null,click:0},i.position.set(e.x,e.y,e.z),i},this.Cloud=function(e){var t=a.models.cloud,n=new I.Mesh(t.geometry[0],t.material[0]);return n.name="cloud",n.cursor="pointer",n.on("click",(function(e){})),n.userData={type:"Cloud",faction:null,variation:0},n.position.set(e.x,e.y,e.z),n},this.Slector=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=a.models.slector,i=new I.Mesh(r.geometry[0],r.material[n]);return i.name="slector_".concat(e),i.renderOrder=1,i.userData={type:"Slector",user:e,variation:n},i.position.set(0,t,0),i},this.models=t},H=a(287),F=a(143),V=a(238),Y=a(289),J=a(239),X=a(240),Z=a(241),K=a(76),Q=a(242),$=a.n(Q),ee=new H.a,te=new I.Scene,ae=new $.a,ne=new I.Clock,re=new I.WebGLRenderer({antialias:!1}),ie=new Y.a(re),oe=re.domElement;function ce(){re.setSize(window.innerWidth,window.innerHeight),ie.setSize(window.innerWidth,window.innerHeight),re.setPixelRatio(window.devicePixelRatio),ie.setPixelRatio(window.devicePixelRatio),w.aspect=window.innerWidth/window.innerHeight,w.updateProjectionMatrix()}var le=function e(){var t=ne.getDelta();ae.begin(),k=requestAnimationFrame(e),O.update(t),ee.update(t),ie.render(),ae.end()};var se=function(){function e(t,a){Object(N.a)(this,e),this.settings=a,this.models=new z(t),this.noise=new _.a}return Object(A.a)(e,[{key:"loadworld",value:function(e,t){}},{key:"worldNoise",value:function(e,t){for(var a=[],n=0;n<t;n++){a[n]=[];for(var r=0;r<e;r++){var i=r/e-.5,o=n/t-.5;a[n][r]=this.noise.noise2D(i,o)/2+.5}}return a}},{key:"createWorld",value:function(){var e=new I.Group,t={121:11,256:16,324:18,400:20},a=this.models,n=a.Field,r=a.Ocean,i=a.Water,o=a.Slector,c=this.settings.data,l=this.worldNoise(t[c.mapsize],t[c.mapsize]),s=[],u=[],m=0,d=0,p=c.players.split("_");e.add(o(p[0],-2,0));for(var h=0;h<=l.length-1;h++){s.push([]);for(var f=0;f<=l[h].length-1;f++)s[h].push(this.blockPlacement(l[h][f]))}for(var g=0;g<=s.length-1;g++){u.push([]);for(var E=0;E<=s[g].length-1;E++){switch(s[g][E]){case"WATER":var y=0,b=[],v=0;"WATER"===s[g][E+1]?y++:y+=0,"WATER"===s[g][E-1]?y++:y+=0,void 0===s[g+1]?y+=0:"WATER"===s[g+1][E]?y++:y+=0,void 0===s[g-1]?y+=0:"WATER"===s[g-1][E]?y++:y+=0,2===y&&("WATER"===s[g][E+1]&&"WATER"===s[g][E-1]?y=5:y+=0,void 0!==s[g+1]&&void 0!==s[g-1]&&("WATER"===s[g+1][E]&&"WATER"===s[g-1][E]?y=5:y+=0)),"WATER"===s[g][E+1]?b.push(!0):b.push(!1),"WATER"===s[g][E-1]?b.push(!0):b.push(!1),void 0===s[g+1]?b.push(!1):"WATER"===s[g+1][E]?b.push(!0):b.push(!1),void 0===s[g-1]?b.push(!1):"WATER"===s[g-1][E]?b.push(!0):b.push(!1),1===y&&(v=!0===b[0]&&!1===b[1]&&!1===b[2]&&!1===b[3]?90:!1===b[0]&&!1===b[1]&&!0===b[2]&&!1===b[3]?0:!1===b[0]&&!0===b[1]&&!1===b[2]&&!1===b[3]?270:180),2===y&&(v=!1===b[0]&&!0===b[1]&&!1===b[2]&&!0===b[3]?0:!0===b[0]&&!1===b[1]&&!1===b[2]&&!0===b[3]?270:!0===b[0]&&!1===b[1]&&!0===b[2]&&!1===b[3]?180:90),3===y&&(v=!0===b[0]&&!1===b[1]&&!0===b[2]&&!0===b[3]?90:!0===b[0]&&!0===b[1]&&!0===b[2]&&!1===b[3]?0:!1===b[0]&&!0===b[1]&&!0===b[2]&&!0===b[3]?270:180),5===y&&(v=!0===b[0]&&!0===b[1]&&!1===b[2]&&!1===b[3]?0:90),u[g].push({type:s[g][E],variation:y,rotation:v,coords:{x:m,y:d}});break;case"OCEAN":var w=0,O=[],k=0;"OCEAN"===s[g][E+1]?w++:w+=0,"OCEAN"===s[g][E-1]?w++:w+=0,void 0===s[g+1]?w+=0:"OCEAN"===s[g+1][E]?w++:w+=0,void 0===s[g-1]?w+=0:"OCEAN"===s[g-1][E]?w++:w+=0,2===w&&("OCEAN"===s[g][E+1]&&"OCEAN"===s[g][E-1]?w=5:w+=0,void 0!==s[g+1]&&void 0!==s[g-1]&&("OCEAN"===s[g+1][E]&&"OCEAN"===s[g-1][E]?w=5:w+=0)),(w>0&&w<4||5===w)&&("OCEAN"===s[g][E+1]?O.push(!0):O.push(!1),"OCEAN"===s[g][E-1]?O.push(!0):O.push(!1),void 0===s[g+1]?O.push(!1):"OCEAN"===s[g+1][E]?O.push(!0):O.push(!1),void 0===s[g-1]?O.push(!1):"OCEAN"===s[g-1][E]?O.push(!0):O.push(!1),1===w&&(k=!0===O[0]&&!1===O[1]&&!1===O[2]&&!1===O[3]?270:!1===O[0]&&!1===O[1]&&!0===O[2]&&!1===O[3]?180:!1===O[0]&&!0===O[1]&&!1===O[2]&&!1===O[3]?90:0),2===w&&(k=!1===O[0]&&!0===O[1]&&!1===O[2]&&!0===O[3]?0:!0===O[0]&&!1===O[1]&&!1===O[2]&&!0===O[3]?270:!0===O[0]&&!1===O[1]&&!0===O[2]&&!1===O[3]?180:90),3===w&&(k=!0===O[0]&&!1===O[1]&&!0===O[2]&&!0===O[3]?90:!0===O[0]&&!0===O[1]&&!0===O[2]&&!1===O[3]?0:!1===O[0]&&!0===O[1]&&!0===O[2]&&!0===O[3]?270:180),5===w&&(k=!0===O[0]&&!0===O[1]&&!1===O[2]&&!1===O[3]?90:0)),u[g].push({type:s[g][E],variation:w,rotation:k,coords:{x:m,y:d}});break;default:u[g].push({type:s[g][E],variation:0,rotation:0,coords:{x:m,y:d}})}m+=2}m>t[c.mapsize]&&(d+=2,m=0)}u.forEach((function(t){t.forEach((function(t){switch(t.type){case"WATER":e.add(i({x:t.coords.x,y:0,z:t.coords.y},null,t.variation,t.rotation));break;case"OCEAN":e.add(r({x:t.coords.x,y:0,z:t.coords.y},null,t.variation,t.rotation));break;case"FIELD":e.add(n({x:t.coords.x,y:0,z:t.coords.y},null,t.variation,t.rotation));break;default:console.warn("?")}}))})),te.add(e)}},{key:"blockPlacement",value:function(e){return e<=.25?"OCEAN":e<.45&&e>.25?"WATER":"FIELD"}}]),e}(),ue=a(645),me=function(){(new ue.a).to("#view-block",{y:200,ease:"power4.easeIn",duration:.8}),setTimeout((function(){l.a.navigate("/game")}),805)},de=function(){var e=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JSON.parse(t.data);case 2:a=e.sent,console.log(a),e.t0=a.type,e.next="LOGIN"===e.t0?7:"SYSTEM"===e.t0?9:"GAME"===e.t0?11:"REQUEST"===e.t0?13:"ERROR"===e.t0?15:16;break;case 7:return null===a.payload.token?a.payload.id=fe.userToken:null===a.payload.id&&(a.payload.token=fe.userToken),e.abrupt("break",17);case 9:return fe.messageSystem.push(a),e.abrupt("break",17);case 11:return fe.messageGame.push(a),e.abrupt("break",17);case 13:return fe.getRequest.push(a),e.abrupt("break",17);case 15:case 16:return e.abrupt("break",17);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(e){fe.send({type:"EXIT"})},he=function(e){fe.errorMessages.push({type:"client",error:e})},fe={socket:null,userToken:null,systemMessage:[],gameMessage:[],requestReponse:[],errorMessages:[],currentRequest:function(){return this.requestReponse[this.requestReponse.length-1]},init:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ws://localhost:8000/polytopia";try{this.socket=new WebSocket(n),this.socket.onopen=function(){var n={type:"LOGIN",payload:{token:a},id:t,date:Date.now()};e.socket.send(JSON.stringify(n)),e.readyState=e.socket.readyState},this.socket.onmessage=de,this.socket.onclose=pe,this.socket.error=he,this.readyState=this.socket.readyState}catch(r){console.error("Websocket error")}return this},send:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.socket.send(JSON.stringify(Object.assign({},t,{id:this.userToken,date:Date.now()})))}catch(a){console.warn("Did not send msg")}return e.abrupt("return",this);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),quit:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==this.socket&&(this.socket.close(),this.socket=null),e.abrupt("return",this);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),reconnect:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.quit(),this.init(),e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},ge=new(a(243).a),Ee=Object(n.createContext)();function ye(e){switch(e.faction){case"xin-xi":return[{id:e.id,score:0,faction:"xin-xi",tech:["climbing"],stars:5,starsPerTurn:2}];case"imperius":return[{id:e.id,score:0,faction:"imperius",tech:["organization"],stars:5,starsPerTurn:2}];case"bardur":return[{id:e.id,score:0,faction:"bardur",tech:["hunting"],stars:5,starsPerTurn:2}];case"oumaji":return[{id:e.id,score:0,faction:"oumaji",tech:["riding"],stars:5,starsPerTurn:2}];case"vengir":return[{id:e.id,score:0,faction:"vengir",tech:["smithery"],stars:5,starsPerTurn:2}];default:return[{id:e.id,score:0,faction:null,tech:[],stars:5,starsPerTurn:2}]}}var be=function(e){var t=e.children,a=e.data,i=Object(n.useState)(!1),o=Object(f.a)(i,2),c=o[0],l=o[1],s=Object(n.useState)("custom"),u=Object(f.a)(s,2),m=u[0],d=u[1],g=Object(n.useState)(0),E=Object(f.a)(g,2),y=E[0],b=E[1],v=Object(n.useState)([]),w=Object(f.a)(v,2),O=w[0],k=w[1],x=Object(n.useState)(0),j=Object(f.a)(x,2),S=j[0],T=j[1];Object(n.useEffect)((function(){(function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,r,i,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="true"===a.mp,l(t),d(a.mode),t){for(i in r=[],a.player)o=i.split("_"),r.push(ye({id:o[0],faction:o[1]}));k(r)}else"random"===(n=a.players.replace("player_",""))&&(n=ge.pick(["xin-xi","imperius","bardur","oumaji","vengir"])),k(ye({id:"player",faction:n}));b(0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return r.a.createElement(Ee.Provider,{value:{mp:c,mode:m,players:O,currentPlayer:y,turns:S,addTurn:function(){T(S+1)}}},t)},ve=(a(630),function(e){function t(){var e;return Object(N.a)(this,t),(e=Object(C.a)(this,Object(P.a)(t).call(this))).setLoading=function(){e.setState({loading:!1})},e.state={loading:!0},e.quaryData=U(),e}return Object(M.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.mount.appendChild(oe),function(){ae.showPanel(1),document.body.appendChild(ae.dom),F.a.install({THREE:I}),re.shadowMap.enabled=!0,(w=new I.OrthographicCamera(window.innerWidth/-200,window.innerWidth/200,window.innerHeight/200,window.innerHeight/-200,1,1e3)).position.set(53,57,57),w.rotation.set(-.965,.505,.61),w.zoom=.16401226550047032,w.updateProjectionMatrix(),ie.addPass(new J.a(te,w));var e=new X.a(new I.Vector2(window.innerWidth,window.innerHeight),te,w);e.edgeStrength=5,e.edgeGlow=0,e.edgeThickness=3,e.pulsePeriod=0,e.hiddenEdgeColor.set("#ffffff"),e.visibleEdgeColor.set(255),ie.addPass(e);var t=new K.a(Z.a);t.uniforms.resolution.value.set(1/window.innerWidth,1/window.innerHeight),ie.addPass(t);var a=new I.Box3(new I.Vector3(20,0,20),new I.Vector3(50,50,50));(O=new F.a(w,oe)).dollySpeed=.9,O.maxZoom=.5,O.minZoom=.09,O.setBoundary(a),new V.a(re,te,w),re.setSize(window.innerWidth,window.innerHeight),ie.setSize(window.innerWidth,window.innerHeight),re.setPixelRatio(window.devicePixelRatio),ie.setPixelRatio(window.devicePixelRatio),w.aspect=window.innerWidth/window.innerHeight;var n=new I.Group,r=new I.DirectionalLight(14548957,.6);r.position.set(0,200,0),r.rotation.set(25,0,0),r.castShadow=!0,r.shadow.mapSize.width=1024,r.shadow.mapSize.height=1024,n.add(r);var i=new I.HemisphereLight;n.add(i),n.add(new I.AmbientLight(11184810,.2)),te.add(n),k?le():k=requestAnimationFrame(le),window.addEventListener("resize",ce,!1)}(),function(e){var t=new ue.a;t.from("#game-loading-h1",{ease:"power3.inOut",duration:2.8,opacity:0}).then((function(){t.to("#game-loading",{ease:"power3.inOut",duration:2,opacity:0}),t.to("#game-loading-h1",{ease:"power1.out",duration:.2,opacity:0}),t.then(e)}))}(this.setLoading),setTimeout((function(){te.background=e.props.assets.textures.background,new se(e.props.assets,{data:e.quaryData}).createWorld()}),3e3)}},{key:"componentWillUnmount",value:function(){fe.send({type:"EXIT"}),cancelAnimationFrame(k),this.mount.removeChild(oe)}},{key:"render",value:function(){var e=this;return r.a.createElement(be,{data:this.quaryData},this.state.loading?r.a.createElement("div",{id:"game-loading"},r.a.createElement("h1",{id:"game-loading-h1"},"Creating world")):null,r.a.createElement("div",{id:"three-scene",ref:function(t){e.mount=t}},this.props.children))}}]),t}(n.Component)),we=Object(u.b)((function(e){return{assets:e.gameAssetsLoad.assets}}),(function(e){return{}}))(ve),Oe=a(24),ke=a(244),xe="GAMEASSETSLOAD_PENDING",je="GAMEASSETSLOAD_ERROR",Se="GAMEASSETSLOAD_COMPLETE",Te="GAMEASSETSLOAD_PROGRESS",Ne=a(245),Ae=a.n(Ne),Ce=a(246),Pe=a.n(Ce),Me=a(247),Re=a.n(Me),_e=a(248),Ie=a.n(_e),Le=a(249),Ge=a.n(Le),We=a(250),De=a.n(We),Ue=a(251),Be=a.n(Ue),qe=a(252),ze=a.n(qe),He=a(253),Fe=a.n(He),Ve=a(254),Ye=a.n(Ve),Je=a(255),Xe=a.n(Je),Ze=a(256),Ke=a.n(Ze),Qe=a(257),$e=a.n(Qe),et=a(258),tt=a.n(et),at=a(259),nt=a.n(at),rt=a(260),it=a.n(rt),ot=a(261),ct=a.n(ot),lt=a(262),st=a.n(lt),ut=a(263),mt=a.n(ut),dt=a(264),pt=a.n(dt),ht=a(265),ft=a.n(ht),gt=a(266),Et=a.n(gt),yt=a(267),bt=a.n(yt),vt=a(268),wt=a.n(vt),Ot=a(269),kt=a.n(Ot),xt=a(270),jt=a.n(xt),St=a(271),Tt=a.n(St),Nt=a(272),At=a.n(Nt),Ct=a(273),Pt=a.n(Ct),Mt=a(274),Rt=a.n(Mt),_t=a(275),It=a.n(_t),Lt=a(276),Gt=a.n(Lt),Wt=a(277),Dt=a.n(Wt),Ut=a(278),Bt=a.n(Ut),qt=a(279),zt=a.n(qt),Ht=a(280),Ft=a.n(Ht),Vt=a(281),Yt=a.n(Vt),Jt={field:{geometry:{},material:{}},cloud:{geometry:{},material:{}},water:{geometry:{},material:{}},ocean:{geometry:{},material:{}},tree:{geometry:{},material:{}},fruit:{geometry:{},material:{}},slector:{geometry:{},material:{}}},Xt=new I.LoadingManager,Zt=new I.TextureLoader(Xt),Kt=new ke.a(Xt).setResourcePath("./textures/"),Qt=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kt.load(wt.a,(function(e){e.preload(),new Oe.a(Xt).setMaterials(e).load(st.a,(function(e){Jt.water.geometry[0]=e.children[0].geometry,Jt.water.material[0]=e.children[0].material}))}));case 2:return e.next=4,Kt.load(Pt.a,(function(e){e.preload(),new Oe.a(Xt).setMaterials(e).load(bt.a,(function(e){Jt.water.geometry[1]=e.children[0].geometry,Jt.water.material[1]=e.children[0].material}))}));case 4:return e.next=6,Kt.load(Tt.a,(function(e){e.preload(),new Oe.a(Xt).setMaterials(e).load(ft.a,(function(e){Jt.water.geometry[2]=e.children[0].geometry,Jt.water.material[2]=e.children[0].material}))}));case 6:return e.next=8,Kt.load(jt.a,(function(e){e.preload(),new Oe.a(Xt).setMaterials(e).load(pt.a,(function(e){Jt.water.geometry[3]=e.children[0].geometry,Jt.water.material[3]=e.children[0].material}))}));case 8:return e.next=10,Kt.load(kt.a,(function(e){e.preload(),new Oe.a(Xt).setMaterials(e).load(mt.a,(function(e){Jt.water.geometry[4]=e.children[0].geometry,Jt.water.material[4]=e.children[0].material}))}));case 10:return e.next=12,Kt.load(At.a,(function(e){e.preload(),new Oe.a(Xt).setMaterials(e).load(Et.a,(function(e){Jt.water.geometry[5]=e.children[0].geometry,Jt.water.material[5]=e.children[0].material}))}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$t=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kt.load(Ke.a,(function(e){e.preload(),new Oe.a(Xt).setMaterials(e).load(De.a,(function(e){Jt.ocean.geometry[0]=e.children[0].geometry,Jt.ocean.material[0]=e.children[0].material}))}));case 2:return e.next=4,Kt.load(ct.a,(function(e){e.preload(),new Oe.a(Xt).setMaterials(e).load(Xe.a,(function(e){Jt.ocean.geometry[1]=e.children[0].geometry,Jt.ocean.material[1]=e.children[0].material}))}));case 4:return e.next=6,Kt.load(nt.a,(function(e){e.preload(),new Oe.a(Xt).setMaterials(e).load(Fe.a,(function(e){Jt.ocean.geometry[2]=e.children[0].geometry,Jt.ocean.material[2]=e.children[0].material}))}));case 6:return e.next=8,Kt.load(tt.a,(function(e){e.preload(),new Oe.a(Xt).setMaterials(e).load(ze.a,(function(e){Jt.ocean.geometry[3]=e.children[0].geometry,Jt.ocean.material[3]=e.children[0].material}))}));case 8:return e.next=10,Kt.load($e.a,(function(e){e.preload(),new Oe.a(Xt).setMaterials(e).load(Be.a,(function(e){Jt.ocean.geometry[4]=e.children[0].geometry,Jt.ocean.material[4]=e.children[0].material}))}));case 10:return e.next=12,Kt.load(it.a,(function(e){e.preload(),new Oe.a(Xt).setMaterials(e).load(Ye.a,(function(e){Jt.ocean.geometry[5]=e.children[0].geometry,Jt.ocean.material[5]=e.children[0].material}))}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ea=function(e){function t(e){var a;return Object(N.a)(this,t),(a=Object(C.a)(this,Object(P.a)(t).call(this,e))).state={error:"",hasError:!1},a}return Object(M.a)(t,e),Object(A.a)(t,[{key:"componentDidCatch",value:function(e){this.setState({error:e,hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("div",null,r.a.createElement("h1",null,"There was an error!"),r.a.createElement("p",null,this.state.error)):this.props.children}}]),t}(n.Component),ta=(a(631),a(282)),aa=a.n(ta),na=(a(632),function(){return r.a.createElement("button",{className:"back-button",onClick:function(){window.history.back()}},r.a.createElement("img",{src:aa.a,alt:"back Icon"}))}),ra=(a(633),function(){return r.a.createElement("div",{id:"about"},r.a.createElement(na,null),r.a.createElement("h1",null,"-ABOUT-"),r.a.createElement("section",null,r.a.createElement("h3",null,"-Debug Info-"),r.a.createElement("p",null,"Build version . . . . . ",B.data.build),r.a.createElement("p",null,"THREE Revision . . . . . . . .",I.REVISION),r.a.createElement("p",null,"Screen size . . . . . . . . . ","".concat(window.innerHeight,"x").concat(window.innerWidth))))}),ia=(a(634),function(){return r.a.createElement("div",{className:"lds"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}),oa=(a(635),function(){var e=S(),t=e.isAuthenticated,a=e.user;return t?r.a.createElement("div",{id:"throneroom"},r.a.createElement(na,null),r.a.createElement("h1",null,"-THRONE ROOM-"),r.a.createElement("section",{id:"tr-player"},r.a.createElement("h4",null,"-Player Info"),r.a.createElement("p",null,"Alias . . . . . . .  ",a.name),r.a.createElement("p",null,"Games Played . . . ","GET_GAMESPLAYED")),r.a.createElement("section",null,r.a.createElement("h4",null,"-Top Score-"),[].length>0?r.a.createElement("p",null,"CONTETN"):r.a.createElement(ia,null)),r.a.createElement("section",null,r.a.createElement("h4",null,"-Top Rating-"),[].length>0?r.a.createElement("p",null,"CONTETN"):r.a.createElement(ia,null))):r.a.createElement("div",{id:"throneroom"},r.a.createElement(na,null),r.a.createElement("h1",null,"-THRONE ROOM-"),r.a.createElement("h3",null,"Plesse Login to View"))}),ca=a(40),la=a.n(ca),sa=(a(636),[r.a.createElement("div",{className:"menu-item",key:"all_tribes"},"All Tribes"),r.a.createElement("div",{className:"menu-item",key:"xin_xi"},"Xin-xi"),r.a.createElement("div",{className:"menu-item",key:"imperius"},"Imperius"),r.a.createElement("div",{className:"menu-item",key:"bardar"},"Bardar"),r.a.createElement("div",{className:"menu-item",key:"oumaji"},"Oumaji"),r.a.createElement("div",{className:"menu-item",key:"vengir"},"Vengir")]),ua=function(){return r.a.createElement("div",{id:"highscore"},r.a.createElement(na,null),r.a.createElement("h1",null,"-HIGH SCORE-"),r.a.createElement(la.a,{selected:"vengir",data:sa,wrapperClass:"hr-menu"}),r.a.createElement("section",null,[].length>0?r.a.createElement("p",null,"CONTENT"):r.a.createElement(ia,null)))},ma=(a(637),a(638),function(e){var t=e.id,a=e.text,n=e.checked,i=e.change;return void 0===n&&(n=!0),r.a.createElement("div",{className:"toggle-button"},r.a.createElement("h5",null,a),r.a.createElement("input",{className:"tgl tgl-skewed",id:t,type:"checkbox",defaultChecked:n,onChange:function(e){i(e)}}),r.a.createElement("label",{className:"tgl-btn","data-tg-on":"ON","data-tg-off":"OFF",htmlFor:t}))}),da=(a(639),function(e){var t,a=e.text,n=e.isUri,i=e.callback,o=e.warn,c=e.disable,s=e.className;return t=n?function(){l.a.navigate(i.uri,i.params)}:i,r.a.createElement("button",{disabled:c,onClick:t,className:"normal-button ".concat(o?"warn":""," ").concat(s)},a)}),pa=function(e,t){switch(t.type){case"set":return D.set(t.payload,e);default:return e}},ha=function(e){var t,a=e.menu;void 0===a&&(a=!1),t=D.isVaild()?D.get():D.default;var i=Object(n.useReducer)(pa,t),o=Object(f.a)(i,2),c=o[0],l=o[1];return r.a.createElement("div",{id:"settings"},r.a.createElement(na,null),r.a.createElement("h1",null,"-SETTINGS-"),r.a.createElement("section",{id:"audio-select"},r.a.createElement("p",null,"Audio volume ",c.volume),r.a.createElement("div",{className:"slidecontainer"},r.a.createElement("input",{type:"range",min:"0",max:"100",defaultValue:t.volume,id:"audio",onChange:function(e){return l({type:"set",payload:{volume:e.target.value}})}}))),r.a.createElement("section",null,r.a.createElement(ma,{checked:t.sound_effects,id:"soundEffect",text:"Sound Effects",change:function(e){return l({type:"set",payload:{sound_effects:e.target.checked}})}}),r.a.createElement(ma,{checked:t.ambience,id:"ambience",text:"Ambience",change:function(e){return l({type:"set",payload:{ambience:e.target.checked}})}}),r.a.createElement(ma,{checked:t.tribe_music,id:"tribeMusic",text:"Tribe Music",change:function(e){return l({type:"set",payload:{tribe_music:e.target.checked}})}})),r.a.createElement("hr",null),r.a.createElement("section",null,r.a.createElement(ma,{checked:t.suggestions,id:"suggestions",text:"Suggestions",change:function(e){return l({type:"set",payload:{suggestions:e.target.checked}})}}),r.a.createElement(ma,{checked:t.info_on_build,id:"infoOnBuild",text:"Info On Build",change:function(e){return l({type:"set",payload:{info_on_build:e.target.checked}})}}),r.a.createElement(ma,{checked:t.confirm_turn,id:"confirmTurn",text:"Confirm Turn",change:function(e){return l({type:"set",payload:{confirm_turn:e.target.checked}})}})),a?r.a.createElement("hr",null):null,a?r.a.createElement(da,{text:"EXIT GAME",warn:!0,isUri:!0,callback:{uri:"/main",params:{replace:!0}}}):null)},fa=(a(640),function(e){var t,a=e.children,n=e.text,i=e.uri,o=e.disable,c=void 0!==o&&o,s=e.className,u=void 0===s?"":s;return t="string"===typeof i||"object"===typeof i?"string"===typeof i?function(){l.a.navigate(i)}:function(){l.a.navigate(i.uri,i.params)}:i,r.a.createElement("div",{className:"icon-button ".concat(u)},r.a.createElement("button",{onClick:t,disabled:c},a),r.a.createElement("p",null,n))}),ga=a(94),Ea=a.n(ga),ya=a(283),ba=a.n(ya),va=a(284),wa=a.n(va),Oa=(a(641),function(e){var t=e.saved,a=S(),n=a.isAuthenticated,i=a.loginWithPopup,o=a.logout,c=B.data,l=c.settings,s=c.dev_url,u=c.production_url,m=l.production?u:s;return r.a.createElement("div",{id:"main-menu"},n?r.a.createElement(b.Button,{type:"primary",size:"large",outline:!1,className:"log-out-in",onClick:function(){o({returnTo:m})}},r.a.createElement("img",{src:wa.a,alt:"Logout",className:"img-out"})):r.a.createElement(b.Button,{type:"primary",size:"large",outline:!1,className:"log-out-in",onClick:function(){i()}},r.a.createElement("img",{src:ba.a,alt:"Login",className:"img-in"})),r.a.createElement("div",{className:"Logo"},r.a.createElement("img",{src:"",alt:"Main icon"}),r.a.createElement("p",null,"---THE BATTLE OF ---"),r.a.createElement("h1",null,"POLYTOPIA")),r.a.createElement("div",{className:"main"},r.a.createElement(da,{text:"NEW GAME",isUri:!0,callback:{uri:"/main/singleplayer/mode",params:{}}}),t?r.a.createElement(da,{text:"RESUME GAME",isUri:!0,callback:{uri:"/game",params:{}}}):null,r.a.createElement(da,{text:"MULTIPLAYER",isUri:!0,callback:{uri:"/main/multiplayer",params:{}}})),r.a.createElement("section",{id:"menu-nav"},r.a.createElement(fa,{text:"Settings",uri:"/main/settings"},r.a.createElement("img",{src:Ea.a,alt:"Menu ICON"})),r.a.createElement(fa,{text:"throneroom",uri:"/main/throneroom"}),r.a.createElement(fa,{text:"Highscore",uri:"/main/highscore"}),r.a.createElement(fa,{text:"About",uri:"/main/about"})))}),ka=(a(140),{"xin-xi":{name:"Xin-xi",tech:"Xin-xi starts the game with the 'Climbing' tech.",dis:"They start their journey in the dense mountains, surrounded by beautiful cherry blossom."},imperius:{name:"Imperius",tech:"Huge mountains and green valleys. The Imperius climate is perfect for growing fruit.",dis:"Imperius starts the game with the 'Organization' tech."},bardur:{name:"Bardur",tech:"Bardur starts the game with the 'Hunting' tech.",dis:"Surviving the harsh eternal winter of the Bardur woods is not an easy task, but Bardur seems to thrive here."},oumaji:{tech:"Oumaji starts the game with the 'Riding' tech.",dis:"The seemingly endless, sun blessed desert is the home of the Oumaji tribe."},vengir:{tech:"Vengir start the game the Smithery tech and a powerful Swordman.",dis:"Frowned upon by the other tribes and pushed into the unpleasant wastelands. Will they tolerate this injustice or rise to fight back?"}}),xa=function(e){var t=e.name,a=e.prevQuary,n=e.setShowTribe;return r.a.createElement("div",{id:"tribe-data"},r.a.createElement("h4",null,ka[t].name),r.a.createElement("img",{src:"",alt:"tribe view"}),r.a.createElement("p",null,ka[t].dis),r.a.createElement("p",null,ka[t].tech),r.a.createElement("section",null,r.a.createElement("p",null,"Score"),r.a.createElement("p",null,"next")),r.a.createElement("div",null,r.a.createElement(da,{className:"cancel",text:"CANCEL",isUri:!1,callback:function(){n(null)}}),r.a.createElement(da,{text:"PICK",isUri:!0,callback:{uri:"/main/singleplayer/setup",params:{queryParams:{mode:a.mode,players:"player_".concat(t)}}}})))},ja=function(){var e=U(),t=Object(n.useState)(""),a=Object(f.a)(t,2),i=a[0],o=a[1];return r.a.createElement("div",{id:"sp-tribe"},r.a.createElement(na,null),r.a.createElement("h1",null,"-PICK YOUR TRIBE-"),r.a.createElement("section",null,r.a.createElement("div",null,r.a.createElement(fa,{text:"Xin-Xi",uri:function(){o("xin-xi")}}),r.a.createElement(fa,{text:"Bardur",uri:function(){o("bardur")}}),r.a.createElement(fa,{text:"Imperius",uri:function(){o("imperius")}})),r.a.createElement("div",null,r.a.createElement(fa,{text:"Oumaji",uri:function(){o("oumaji")}}),r.a.createElement(fa,{text:"Vengir",uri:function(){o("vengir")}}))),r.a.createElement("section",{id:"sp-tribe-random"},r.a.createElement("p",null,"-Let fate decide!-"),r.a.createElement(da,{text:"RANDOM",isUri:!0,callback:{uri:"/main/singleplayer/setup",params:{queryParams:{mode:e.mode,players:"player_random"}}}})),function(e,t,a){switch(e){case"xin-xi":case"imperius":case"bardur":case"oumaji":case"vengir":return r.a.createElement(xa,{name:e,prevQuary:t,setShowTribe:a});default:return null}}(i,e,o))},Sa=function(){return r.a.createElement("div",{id:"sp-mode"},r.a.createElement(na,null),r.a.createElement("h1",null,"-GAME MODE-"),r.a.createElement("section",null,r.a.createElement("button",{className:"normal-button",onClick:function(){l.a.navigate("/main/singleplayer/tribe",{queryParams:{mode:"perfection"}})}},r.a.createElement("img",{src:"",alt:"perfection_icon"}),r.a.createElement("h3",null,"PERFECTION"),r.a.createElement("p",null,"Show your skills on the golobal highscore in the classic 30 turns game.")),r.a.createElement("button",{className:"normal-button",onClick:function(){l.a.navigate("/main/singleplayer/tribe",{queryParams:{mode:"domination"}})}},r.a.createElement("img",{src:"",alt:"domination_icon"}),r.a.createElement("h3",null,"DOMINATION"),r.a.createElement("p",null,"Play until there is only one tribe left, with no time limit.")),r.a.createElement("button",{className:"normal-button",onClick:function(){l.a.navigate("/main",{queryParams:{mode:"custom"}})}},r.a.createElement("img",{src:"",alt:"custommode_icon"}),r.a.createElement("h3",null,"CUSTOM"),r.a.createElement("p",null,"Play custom created modes you created or the community."))))},Ta=[1,2,3,4],Na=[121,256,324,400],Aa=["Easy","Normal","Hard","Crazy"],Ca=function(e){return e.map((function(e){return r.a.createElement("div",{className:"scrollmenu-item",key:e},e)}))},Pa=function(){var e,t=Object(n.useState)(121),a=Object(f.a)(t,2),i=a[0],o=a[1],c=Object(n.useState)("NORMAL"),l=Object(f.a)(c,2),s=l[0],u=l[1],m=Object(n.useState)(1),d=Object(f.a)(m,2),p=d[0],h=d[1];return r.a.createElement("div",{id:"sp-setup"},r.a.createElement(na,null),r.a.createElement("h1",null,"-GAME SETUP-"),r.a.createElement("section",null,r.a.createElement("h5",null,"Opponents"),r.a.createElement(la.a,{selected:1,onSelect:function(e){h(e)},data:Ca(Ta)})),r.a.createElement("section",null,r.a.createElement("h5",null,"World Size"),r.a.createElement(la.a,{selected:121,onSelect:function(e){o(e)},data:Ca(Na),useButtonRole:!0})),r.a.createElement("section",null,r.a.createElement("h5",null,"Difficulty"),r.a.createElement(la.a,{selected:"Easy",onSelect:function(e){u(e)},data:Ca(Aa)})),r.a.createElement(da,{text:"Start Game",isUri:!0,callback:{uri:"/game",params:{replace:!0,queryParams:(e={savedgame:!1,mp:!1,opponents:p,mapsize:i,diff:s.toUpperCase()},Object.assign({},e,U()))}}}))},Ma=(a(62),a(285)),Ra=a.n(Ma),_a=function(){var e=[];W()&&(e=G().map((function(e){return r.a.createElement("button",{className:"saved",key:e.id},r.a.createElement("img",{src:"",alt:"randomIcon"}),r.a.createElement("h5",null,e.name))})));return e},Ia=function(){var e=S(),t=e.isAuthenticated,a=e.getTokenSilently,i=e.user,o=e.loginWithPopup,c=Object(n.useState)(!1),s=Object(f.a)(c,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(f.a)(d,2),h=p[0],g=p[1],E=Object(n.useState)([]),y=Object(f.a)(E,2),v=y[0],w=y[1],O=Object(n.useState)(_a()),k=Object(f.a)(O,2),x=k[0],j=k[1];return Object(n.useEffect)((function(){!function(){m(!1),w([]),j(_a());try{t&&null===fe.socket&&a().then((function(e){fe.init(i.sub.replace("auth0|",""),e)}))}catch(e){fe.quit(),console.error("Failed Login"),g(!0)}}()}),[t,a]),r.a.createElement("div",{id:"multiplayer"},h?r.a.createElement(b.Alert,{type:"danger",icon:!0,iconSize:20,className:"alert-nologin"},"Please Login to use and see online components. ",r.a.createElement(b.Button,{onClick:function(){l.a.navigate("/main"),o()}},"Login")):null,r.a.createElement(na,null),r.a.createElement("h1",null,"-MULTIPLAYER-"),r.a.createElement("h3",null,"-".concat(u?"Your":"Their"," Turn-")),v.length>0?r.a.createElement("div",null):r.a.createElement(ia,null),r.a.createElement("h3",null,"-Pass & Play-"),x.length>0?x:r.a.createElement(ia,null),r.a.createElement("section",null,r.a.createElement(fa,{uri:function(){t?l.a.navigate("/main/multiplayer/new-game/setup"):g(!0)},text:"New Game"},r.a.createElement("img",{src:Ra.a,alt:"NewGame"})),r.a.createElement(fa,{uri:"/main/multiplayer/friends",text:"Friends"})))},La=function(){return r.a.createElement("div",{id:"mp-friends"},r.a.createElement(na,null),r.a.createElement("h1",null,"-FRIENDS LIST-"),r.a.createElement("h5",null,"-Friends-"),r.a.createElement(ia,null),r.a.createElement(da,{text:"NEW FRIEND",isUri:!1,callback:function(){}}))},Ga=function(){var e=Object(n.useState)("local"),t=Object(f.a)(e,2),a=t[0],i=t[1],o=Object(n.useState)("might"),c=Object(f.a)(o,2),l=c[0],s=c[1],u=Object(n.useState)("tiny"),m=Object(f.a)(u,2),d=m[0],p=m[1];return r.a.createElement("div",{id:"mp-setup"},r.a.createElement(na,null),r.a.createElement("h1",null,"-SETUP-"),r.a.createElement("div",null,r.a.createElement("h6",null,"Network"),r.a.createElement(la.a,{data:[r.a.createElement("button",{onClick:function(){return i("online")},key:"online"},"Online"),r.a.createElement("button",{onClick:function(){return i("local")},key:"local"},"Pass & Play")]})),r.a.createElement("p",null,"Lorm ipsom"),r.a.createElement("div",null,r.a.createElement("h6",null,"Game Mode"),r.a.createElement(la.a,{data:[r.a.createElement("div",{onClick:function(){return s("glory")},key:"glory"},"Glory"),r.a.createElement("div",{onClick:function(){return s("might")},key:"might"},"Might")]})),r.a.createElement("p",null,"Lorm Ipsom"),r.a.createElement("div",null,r.a.createElement("h6",null,"Map Size"),r.a.createElement(la.a,{data:[r.a.createElement("div",{onClick:function(){p("tiny")},key:"tiny"},"tiny"),r.a.createElement("div",{onClick:function(){return p("normal")},key:"normal"},"normal"),r.a.createElement("div",{onClick:function(){return p("large")},key:"large"},"large"),r.a.createElement("div",{onClick:function(){return p("mega")},key:"mega"},"mega"),r.a.createElement("div",{onClick:function(){return p("ultra")},key:"ultra"},"ultra")]})),r.a.createElement("p",null,"".concat(999," tiles map.")),r.a.createElement(da,{text:"CONTINUE",isUri:!0,callback:{uri:"/main/multiplayer/new-game/players",params:{queryParams:{network:a,mode:l,mapSize:d}}}}))},Wa=function(){var e=Object(n.useState)(U()),t=Object(f.a)(e,2),a=t[0],i=t[1],o=Object(n.useState)(void 0===a.players?0:a.players.length),c=Object(f.a)(o,2),l=c[0],s=c[1],u=null;return a.players&&(u=a.players.map((function(e){return r.a.createElement("div",{key:e},r.a.createElement("img",{src:"",alt:"head"}),r.a.createElement("h6",null,e),r.a.createElement("button",{onClick:function(){var t,n;s(l-1),i((t=e,n=a,Object.assign({},n,{players:n.players.filter((function(e){return e!==t}))})))}},"X"))}))),r.a.createElement("div",{id:"player-mp"},r.a.createElement(na,null),r.a.createElement("h1",null,"-PICK PLAYERS-"),r.a.createElement("h5",null,"-Game Name-"),r.a.createElement("input",{type:"text",readOnly:!0,defaultValue:"RANDOM_NAME"}),r.a.createElement("div",null,r.a.createElement("p",null,"Map Size: ".concat(324)),r.a.createElement("p",null,"Game Mode: ".concat("Might")),r.a.createElement("p",null,"MODE_TEXT"),r.a.createElement("hr",null),r.a.createElement("h5",null,"-Players (".concat(l,"/5)-")),u,r.a.createElement(da,{text:"ADD PLAYER",isUri:!0,callback:{uri:"/main/multiplayer/new-game/add",params:{queryParams:a}}}),r.a.createElement("hr",null),r.a.createElement(da,{disable:!(l>=2),text:"START GAME",isUri:!0,callback:{uri:"/main/multiplayer/new-game/tribes",params:{replace:!0,queryParams:Object.assign({},{mp:!0,savedgame:!1},a)}}})))},Da=function(){return"local"===U().network||fe.send({type:"get",request:"slectedTribes",ofGameID:"CURRENT_GAME_ID"}),r.a.createElement("div",{id:"tribes-mp"},r.a.createElement(na,null))},Ua=function(){var e=U(),t="local"===e.network,a=e.players||[],n=!1;return e.players&&5===e.players.length&&(n=!0),t||fe.send({type:"get",request:"friendsList",ofUser:"USER_TEMP",status:204}),r.a.createElement("div",{id:"tribes-mp"},r.a.createElement(na,null),r.a.createElement("h1",null,"-FRIEND LIST-"),r.a.createElement("div",null,r.a.createElement("h5",null,"-Local Players-"),r.a.createElement("section",null,r.a.createElement(fa,{disable:n,text:"Player 1",uri:{uri:"/main/multiplayer/new-game/players",params:{queryParams:Object.assign({},e,{players:a.concat("player1_na")})}}}),r.a.createElement(fa,{disable:n,text:"Player 2",uri:{uri:"/main/multiplayer/new-game/players",params:{queryParams:Object.assign({},e,{players:a.concat("player2_na")})}}}),r.a.createElement(fa,{disable:n,text:"Player 3",uri:{uri:"/main/multiplayer/new-game/players",params:{queryParams:Object.assign({},e,{players:a.concat("player3_na")})}}}),r.a.createElement(fa,{disable:n,text:"Player 4",uri:{uri:"/main/multiplayer/new-game/players",params:{queryParams:Object.assign({},e,{players:a.concat("player4_na")})}}}),r.a.createElement(fa,{disable:n,text:"Player 5",uri:{uri:"/main/multiplayer/new-game/players",params:{queryParams:Object.assign({},e,{players:a.concat("player5_na")})}}}))),r.a.createElement("h5",null,"-Bots-"),r.a.createElement("section",null,r.a.createElement(fa,{disable:n,text:"Easy Bot",uri:{uri:"/main/multiplayer/new-game/players",params:{queryParams:Object.assign({},e,{players:a.concat("botEasy_random")})}}}),r.a.createElement(fa,{disable:n,text:"Normal Bot",uri:{uri:"/main/multiplayer/new-game/players",params:{queryParams:Object.assign({},e,{players:a.concat("botNormal_random")})}}}),r.a.createElement(fa,{disable:n,text:"Hard Bot",uri:{uri:"/main/multiplayer/new-game/players",params:{queryParams:Object.assign({},e,{players:a.concat("botHard_random")})}}}),r.a.createElement(fa,{disable:n,text:"Crazy Bot",uri:{uri:"/main/multiplayer/new-game/players",params:{queryParams:Object.assign({},e,{players:a.concat("botCrazy_random")})}}})))},Ba=a(286),qa=a.n(Ba),za=(a(642),function(){Object(n.useEffect)((function(){(new ue.a).from("#view-block",{y:100,ease:"power3.easeOut",duration:1})}),[]);var e=U(),t=te.getObjectById(Number(e.blockId));return te.getObjectByName("slector_player").position.set(t.position.x,0,t.position.z),r.a.createElement("div",{id:"view-block"},r.a.createElement("section",null,r.a.createElement("img",{src:"",alt:"block icon"}),r.a.createElement("div",null,r.a.createElement("h3",null,t.userData.type),r.a.createElement("p",null,null===t.userData.faction?"This tile is outside your empire":"")),r.a.createElement("button",{onClick:me},r.a.createElement("img",{src:qa.a,alt:"hide"}))),Object.keys(t.userData.canBuild).length>0?r.a.createElement(la.a,{data:[r.a.createElement(fa,{text:"Fram"})],menuClass:"view-scroll"}):null)}),Ha={text:"Next Turn",class:"nb-default"},Fa=function(){var e=Object(n.useState)(Ha),t=Object(f.a)(e,2),a=t[0];t[1];return r.a.createElement("div",{id:"nav-game"},r.a.createElement(fa,{text:"Menu",uri:"/game/menu"},r.a.createElement("img",{src:Ea.a,alt:"Game Menu"})),r.a.createElement(fa,{text:"Game Stats",uri:"/game/stats"}),r.a.createElement(fa,{text:"Tech Tree",uri:"/game/tech"}),r.a.createElement(fa,{text:a.text,className:a.class}))},Va=function(){var e=Object(n.useContext)(Ee),t=e.mode,a=e.turns,i=e.players,o=e.currentPlayer,c=Object(n.useState)({score:0,stars:5,starsPerTurn:2}),l=Object(f.a)(c,2),s=l[0],u=l[1];return Object(n.useEffect)((function(){void 0!==i[o]&&u(i[o])}),[o,i]),r.a.createElement("div",{id:"game-data"},r.a.createElement("section",null,r.a.createElement("h5",null,"Score"),r.a.createElement("p",null,s.score)),r.a.createElement("section",null,r.a.createElement("h5",null,"Stars (+",s.starsPerTurn,")"),r.a.createElement("p",null,s.stars)),r.a.createElement("section",null,r.a.createElement("h5",null,"Turn ","perfection"===t?"(".concat(a,"/30)"):""),r.a.createElement("p",null,a)))},Ya=function(){return r.a.createElement("div",{id:"game-stats"})},Ja=function(){var e=Object(n.useState)(!1),t=Object(f.a)(e,2),a=t[0],i=t[1];return r.a.createElement("div",{id:"tech-tree"},r.a.createElement(na,null),r.a.createElement("button",{onClick:function(){i(!0)}},"Test"),r.a.createElement(b.Modal,{className:"pt-modal",onClose:function(){i(!1)},title:"",visible:a,footer:[r.a.createElement(da,{text:"Cancal",isUri:!1,callback:function(){i(!1)},key:"cancal"}),r.a.createElement(da,{text:"Ok",isUri:!1,key:"ok"})]},"DATA_TECH"))},Xa=function(e){function t(){var e;return Object(N.a)(this,t),(e=Object(C.a)(this,Object(P.a)(t).call(this))).state={savedGame:!1,savedGameObject:{},location:"MAIN",inGame:"NONE",hasBefore:!1},e}return Object(M.a)(t,e),Object(A.a)(t,[{key:"goTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l.a.navigate(e,t)}},{key:"componentDidMount",value:function(){var e=this;this.props.loadGameAssets(),l.a.setRoutes({"/game":{target:{showGame:function(){e.setState({location:"GAME",inGame:"NONE"})},show:function(t){e.setState({inGame:t.uri.replace("/game/","").replace(/\/(ocean|field|water)$/,"").toUpperCase()})},data:function(t){e.setState({inGame:t.uri.replace("/game/","").toUpperCase()})}},"/":"showGame","/view":{"/:type":"show"},"/tech":"data","/stats":"data","/menu":"data"},"/main":{target:{index:function(){e.setState({location:"MAIN",inGame:null})},show:function(t){e.setState({location:t.uri.replace("/main/","").toUpperCase()})}},"/":"index","/singleplayer":{target:{show:function(t){e.setState({location:t.uri.replace("/main/","").toUpperCase()})}},"/mode":"show","/tribe":"show","/setup":"show"},"/multiplayer":{target:{show:function(t){e.setState({location:t.uri.replace("/main/","").toUpperCase()})}},"/":"show","/new-game":{target:{show:function(t){e.setState({location:t.uri.replace("/main/multiplayer/","").toUpperCase()})}},"/setup":"show","/players":"show","/tribes":"show","/add":"show"},"/friends":"show","/:game":"game"},"/settings":"show","/highscore":"show","/throneroom":"show","/about":"show"}}),l.a.dispatch(),this.state.hasBefore||(this.goTo("/main",{replace:!0}),this.setState({hasBefore:!0}))}},{key:"loadContent",value:function(e){switch(e){case"MAIN":return r.a.createElement(Oa,{saved:L()});case"SETTINGS":return r.a.createElement(ha,{menu:!1});case"ABOUT":return r.a.createElement(ra,null);case"HIGHSCORE":return r.a.createElement(ua,null);case"THRONEROOM":return r.a.createElement(oa,null);case"SINGLEPLAYER/MODE":return r.a.createElement(Sa,null);case"SINGLEPLAYER/TRIBE":return r.a.createElement(ja,null);case"SINGLEPLAYER/SETUP":return r.a.createElement(Pa,null);case"MULTIPLAYER":return r.a.createElement(Ia,null);case"MULTIPLAYER/FRIENDS":return r.a.createElement(La,null);case"NEW-GAME/SETUP":return r.a.createElement(Ga,null);case"NEW-GAME/PLAYERS":return r.a.createElement(Wa,null);case"NEW-GAME/TRIBES":return r.a.createElement(Da,null);case"NEW-GAME/ADD":return r.a.createElement(Ua,null);default:throw new Error("LOCATION CHANGE ERROR")}}},{key:"inGameContent",value:function(e){switch(e){case"NONE":return r.a.createElement(Fa,null);case"VIEW":return r.a.createElement(za,null);case"TECH":return r.a.createElement(Ja,null);case"STATS":return r.a.createElement(Ya,null);case"MENU":return r.a.createElement(ha,{menu:!0});default:return null}}},{key:"render",value:function(){var e=this.state,t=e.location,a=e.inGame;return r.a.createElement(ea,null,"GAME"!==t?r.a.createElement("div",{className:"background"},this.loadContent(t)):r.a.createElement(we,null,r.a.createElement(Va,null),this.inGameContent(a)))}}]),t}(n.Component),Za=Object(u.b)((function(e){return{of:e.gameAssetsLoad.progress.of,item:e.gameAssetsLoad.progress.item,isPending:e.gameAssetsLoad.isPending,loadError:e.gameAssetsLoad.error}}),(function(e){return{loadGameAssets:function(){return e((function(e){Xt.onStart=function(){e({type:xe})},Xt.onLoad=function(){e({type:Se,payload:Jt})},Xt.onError=function(t){e({type:je,payload:t})},Xt.onProgress=function(t,a,n){e({type:Te,payload:{item:a,of:n}})},Zt.load(Ae.a,(function(e){Jt.textures={background:e}})),Qt(),$t(),Kt.load(Re.a,(function(e){e.preload(),new Oe.a(Xt).setMaterials(e).load(Pe.a,(function(e){Jt.field.geometry[0]=e.children[0].geometry,Jt.field.material[0]=e.children[0].material}))})),Kt.load(It.a,(function(e){e.preload(),new Oe.a(Xt).setMaterials(e).load(Rt.a,(function(e){Jt.cloud.geometry[0]=e.children[0].geometry,Jt.cloud.material[0]=e.children[0].material}))})),Kt.load(Ft.a,(function(e){e.preload(),new Oe.a(Xt).setMaterials(e).load(Bt.a,(function(e){Jt.tree.geometry[0]=e.children[0].geometry,Jt.tree.material[0]=e.children[0].material,Kt.load(Yt.a,(function(e){e.preload(),new Oe.a(Xt).setMaterials(e).load(zt.a,(function(e){Jt.tree.geometry[1]=e.children[0].geometry,Jt.tree.material[1]=e.children[0].material}))}))}))})),Kt.load(Ge.a,(function(e){e.preload(),new Oe.a(Xt).setMaterials(e).load(Ie.a,(function(e){Jt.fruit.geometry[0]=e.children[0].geometry,Jt.fruit.material[0]=e.children[0].material}))})),Kt.load(Dt.a,(function(e){e.preload(),new Oe.a(Xt).setMaterials(e).load(Gt.a,(function(e){Jt.slector.geometry[0]=e.children[0].geometry,Jt.slector.material[0]=e.children[0].material}))}))}))}}}))(Xa),Ka={isPending:!0,error:"",assets:{},progress:{item:0,of:0}},Qa=Object(m.c)({gameAssetsLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Se:return Object.assign({},e,{isPending:!1,assets:t.payload});case xe:return Object.assign({},e,{isPending:!0});case Te:return Object.assign({},e,{progress:{item:t.payload.item,of:t.payload.of}});case je:default:return e}}}),$a=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function en(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(b.Message.success("New content is available and will be use when all tabs for this page are closed"),t&&t.onUpdate&&t.onUpdate(e)):(b.Message.info("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){b.Message.error("Error during service worker registration"),console.error("Error during service worker registration:",e)}))}var tn=a(144),an=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||m.d,nn=Object(m.e)(Qa,an(Object(m.a)(s.a)));B.load().then((function(){var e=B.data,t=e.settings,a=e.dev_url,n=e.production_url,i=t.production?n:a;console.log(i),o.a.render(r.a.createElement(T,{domain:tn.domain,client_id:tn.clientId,redirect_uri:i,onRedirectCallback:function(){l.a.navigate("/")}},r.a.createElement(u.a,{store:nn},r.a.createElement(Za,null))),document.getElementById("root"))})),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");$a?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):en(e,t)})).catch((function(){b.Message.info("No internet connection found. App is running in offline mode."),console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):en(t,e)}))}}()},94:function(e,t,a){e.exports=a.p+"static/media/menu.8c6957cc.svg"}},[[290,1,2]]]);
//# sourceMappingURL=main.e7f50541.chunk.js.map