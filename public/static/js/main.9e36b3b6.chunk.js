(window.webpackJsonppolytopia=window.webpackJsonppolytopia||[]).push([[0],{101:function(e,t,a){},105:function(e){e.exports=JSON.parse('{"domain":"visualsource.auth0.com","clientId":"lMZtNGOs7ZZijZT2Xk0HChwHvyqRSHJX"}')},170:function(e,t,a){e.exports=a.p+"static/media/background_game.b879c134.webp"},171:function(e,t,a){e.exports=a.p+"static/media/field.820a5de2.obj"},172:function(e,t,a){e.exports=a.p+"static/media/field.bd606281.mtl"},173:function(e,t,a){e.exports=a.p+"static/media/fruit_one.401782fb.obj"},174:function(e,t,a){e.exports=a.p+"static/media/fruit_one.deedf5c9.mtl"},175:function(e,t,a){e.exports=a.p+"static/media/ocean.49960e7c.obj"},176:function(e,t,a){e.exports=a.p+"static/media/ocean_none.e646e666.obj"},177:function(e,t,a){e.exports=a.p+"static/media/ocean_one.1149f12f.obj"},178:function(e,t,a){e.exports=a.p+"static/media/ocean_two.8478a460.obj"},179:function(e,t,a){e.exports=a.p+"static/media/ocean_two_b.5f12e9cc.obj"},180:function(e,t,a){e.exports=a.p+"static/media/ocean_three.09f7749a.obj"},181:function(e,t,a){e.exports=a.p+"static/media/ocean.9289348b.mtl"},182:function(e,t,a){e.exports=a.p+"static/media/ocean_none.d0d89c1d.mtl"},183:function(e,t,a){e.exports=a.p+"static/media/ocean_one.f49bda95.mtl"},184:function(e,t,a){e.exports=a.p+"static/media/ocean_two.40654d41.mtl"},185:function(e,t,a){e.exports=a.p+"static/media/ocean_two_b.38e20ff2.mtl"},186:function(e,t,a){e.exports=a.p+"static/media/ocean_three.ff5600a1.mtl"},187:function(e,t,a){e.exports=a.p+"static/media/water.065725eb.obj"},188:function(e,t,a){e.exports=a.p+"static/media/water_none.bd934e57.obj"},189:function(e,t,a){e.exports=a.p+"static/media/water_one.34ff3246.obj"},190:function(e,t,a){e.exports=a.p+"static/media/water_two.0db41b72.obj"},191:function(e,t,a){e.exports=a.p+"static/media/water_two_b.7b4c02ee.obj"},192:function(e,t,a){e.exports=a.p+"static/media/water_three.7dfcfd72.obj"},193:function(e,t,a){e.exports=a.p+"static/media/water.b6d02e43.mtl"},194:function(e,t,a){e.exports=a.p+"static/media/water_none.a0876c1d.mtl"},195:function(e,t,a){e.exports=a.p+"static/media/water_one.14ed2016.mtl"},196:function(e,t,a){e.exports=a.p+"static/media/water_two.504cbe72.mtl"},197:function(e,t,a){e.exports=a.p+"static/media/water_two_b.cde0d92a.mtl"},198:function(e,t,a){e.exports=a.p+"static/media/water_three.a56fb38c.mtl"},199:function(e,t,a){e.exports=a.p+"static/media/cloud.1337cfe0.obj"},200:function(e,t,a){e.exports=a.p+"static/media/cloud.47b98894.mtl"},201:function(e,t,a){e.exports=a.p+"static/media/slector.a35f20df.obj"},202:function(e,t,a){e.exports=a.p+"static/media/slector.1da0a85a.mtl"},203:function(e,t,a){e.exports=a.p+"static/media/tree_one.9a0a07b7.obj"},204:function(e,t,a){e.exports=a.p+"static/media/tree_two.ddb2b1b0.obj"},205:function(e,t,a){e.exports=a.p+"static/media/tree_one.9bf4606c.mtl"},206:function(e,t,a){e.exports=a.p+"static/media/tree_two.bed7a1fa.mtl"},207:function(e,t,a){e.exports=a.p+"static/media/arrow_perv.1448615b.svg"},208:function(e,t,a){e.exports=a.p+"static/media/sign-in.2d188652.svg"},209:function(e,t,a){e.exports=a.p+"static/media/sign-out.80e1990a.svg"},210:function(e,t,a){e.exports=a.p+"static/media/plus.785b6480.svg"},211:function(e,t,a){e.exports=a.p+"static/media/arrow_down.84da5a29.svg"},215:function(e,t,a){e.exports=a(484)},471:function(e,t,a){},472:function(e,t,a){},473:function(e,t,a){},474:function(e,t,a){},475:function(e,t,a){},476:function(e,t,a){},477:function(e,t,a){},478:function(e,t,a){},479:function(e,t,a){},480:function(e,t,a){},481:function(e,t,a){},482:function(e,t,a){},483:function(e,t,a){},484:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(36),c=a.n(i),o=a(16),l=a.n(o),s=a(159),u=a(52),m=a(43),d=a(14),p=a.n(d),h=a(24),f=a(12),E=a(213),g=a(162),y=a.n(g),b=a(35);function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Message",t={position:"top-right",title:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Title"};switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null){case"info":b.Message.info(e,5,t);break;case"error":b.Message.error(e,5,t);break;case"success":b.Message.success(e,5,t);break;default:b.Message.show(e,5,t)}}var w=function(){return l.a.naviagte("/")},O=Object(n.createContext)(),k=function(){return Object(n.useContext)(O)},x=a(4),S=a(5),j=a(10),N=a(7),T=a(11),A=a(2),C=a(212),M=a(104),P=a(163),R=a(214),I=a(164),_=a(165),L=a(166),G=a(58),D=a(167),W=a.n(D),U=(function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.parse(localStorage.getItem("save-sp")));case 1:case"end":return e.stop()}}),e)})))}(),function(){return!!localStorage.getItem("save-sp")}),q=function(){return JSON.parse(localStorage.getItem("save-mp"))},z=function(){return null!==localStorage.getItem("save-mp")},B={default:{sound_effects:!0,ambience:!0,tribe_music:!0,suggestions:!0,info_on_build:!0,confirm_turn:!0,volume:100},get:function(){return JSON.parse(localStorage.getItem("settings"))},set:function(e,t){return localStorage.setItem("settings",JSON.stringify(Object.assign({},t,e))),JSON.parse(localStorage.getItem("settings"))},remove:function(){localStorage.removeItem("settings")},isVaild:function(){return null!==localStorage.getItem("settings")||(localStorage.setItem("settings",JSON.stringify(B.default)),!1)}},H=function(){for(var e={},t=l.a.getCurrentURI().replace(/\/(.*)\/(.*)\/(.*)\?/,"").replace(/\/(.*)\/(.*)\?/,"").replace(/\/(.*)\?/,"").split(/=|&/),a=0,n=[],r=0;r<t.length/2;r++)t[a].includes("[]")?(n.push(t[a+1]),Object.assign(e,JSON.parse('{"'.concat(t[a].replace("[]",""),'":').concat(JSON.stringify(n),"}")))):Object.assign(e,JSON.parse('{"'.concat(t[a],'":"').concat(t[a+1],'"}'))),a+=2;return e},F={data:{},load:function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/config/config.json").then((function(e){return e.json()}));case 3:t=e.sent,F.data=t,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to load config");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},Y={showingView:!1,preId:0},V=function e(t){var a=this;Object(x.a)(this,e),this.Water=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=a.models.water,c=new A.Mesh(i.geometry[n],i.material[n]);return c.name="water_"+n,c.cursor="pointer",c.on("click",(function(e){!Y.showingView&&(e.data.target.userData.click<1||Y.preId!==e.data.target.id)?(l.a.navigate("/game/view/water",{queryParams:{blockId:e.data.target.id}}),e.data.target.userData.click++,Y.preId=e.data.target.id):(l.a.navigate("/game"),e.data.target.userData.click=0)})),c.userData={type:"Water",faction:t,children:[],canBuild:{},variation:n,parent:null,click:0},c.position.set(e.x,e.y,e.z),c.rotateY(Math.PI*r/180),c},this.Field=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=a.models.field,i=new A.Mesh(r.geometry[0],r.material[0]);return i.name="field_".concat(n),i.cursor="pointer",i.on("click",(function(e){!Y.showingView&&(e.data.target.userData.click<1||Y.preId!==e.data.target.id)?(l.a.navigate("/game/view/field",{queryParams:{blockId:e.data.target.id}}),e.data.target.userData.click++,Y.preId=e.data.target.id):(l.a.navigate("/game"),e.data.target.userData.click=0)})),i.userData={type:"Field",faction:t,children:[],canBuild:{fram:{cost:0}},variation:n,parent:null,click:0},i.position.set(e.x,e.y,e.z),i},this.Ocean=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=a.models.ocean,c=new A.Mesh(i.geometry[n],i.material[n]);return c.name="ocean_"+n,c.cursor="pointer",c.on("click",(function(e){!Y.showingView&&(e.data.target.userData.click<1||Y.preId!==e.data.target.id)?(l.a.navigate("/game/view/ocean",{queryParams:{blockId:e.data.target.id}}),e.data.target.userData.click++,Y.preId=e.data.target.id):(l.a.navigate("/game"),e.data.target.userData.click=0)})),c.userData={type:"Ocean",faction:t,children:[],canBuild:{},variation:n,parent:null,click:0},c.position.set(e.x,e.y,e.z),c.rotateY(Math.PI*r/180),c},this.Tree=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=a.models.tree,i=new A.Mesh(r.geometry[n],r.material[n]);return i.cursor="pointer",i.on("click",(function(e){console.log(e)})),i.name="tree_"+n,i.userData={type:"TREE",faction:t,attached:[],canBuild:[],variation:n},i.position.set(e.x,e.y,e.z),i},this.Wall=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=a.models.wall,c=new A.Mesh(i.geometry[n],i.material[n]);return c.name="wall_"+n,c.cursor="pointer",c.on("click",(function(e){console.log(e)})),c.userData={type:"WALL",faction:t,attached:[],canBuild:[],variation:n},c.position.set(e.x,e.y,e.z),c.rotateY(Math.PI*r/180),c},this.Fruit=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=a.models.fruit,i=new A.Mesh(r.geometry[n],r.material[n]);return i.name="fruit_"+n,i.cursor="pointer",i.on("click",(function(e){console.log(e)})),i.userData={type:"Fruit",faction:t,variation:n,parent:null,click:0},i.position.set(e.x,e.y,e.z),i},this.Cloud=function(e){var t=a.models.cloud,n=new A.Mesh(t.geometry[0],t.material[0]);return n.name="cloud",n.cursor="pointer",n.on("click",(function(e){})),n.userData={type:"Cloud",faction:null,variation:0},n.position.set(e.x,e.y,e.z),n},this.Slector=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=a.models.slector,i=new A.Mesh(r.geometry[0],r.material[n]);return i.name="slector_".concat(e),i.userData={type:"Slector",user:e,variation:n},i.position.set(0,t,0),i},this.models=t},J=function(){function e(t,a){Object(x.a)(this,e),this.settings=a,this.models=new V(t),this.noise=new W.a}return Object(S.a)(e,[{key:"loadworld",value:function(e,t){}},{key:"worldNoise",value:function(e,t){for(var a=[],n=0;n<t;n++){a[n]=[];for(var r=0;r<e;r++){var i=r/e-.5,c=n/t-.5;a[n][r]=this.noise.noise2D(i,c)/2+.5}}return a}},{key:"createWorld",value:function(){var e=new A.Group,t={121:11,256:16,324:18,400:20},a=this.models,n=a.Field,r=a.Ocean,i=a.Water,c=a.Slector,o=this.settings,l=o.scene,s=o.data,u=this.worldNoise(t[s.mapsize],t[s.mapsize]),m=[],d=[],p=0,h=0;e.add(c(s.player,-2,0));for(var f=0;f<=u.length-1;f++){m.push([]);for(var E=0;E<=u[f].length-1;E++)m[f].push(this.blockPlacement(u[f][E]))}for(var g=0;g<=m.length-1;g++){d.push([]);for(var y=0;y<=m[g].length-1;y++){switch(m[g][y]){case"WATER":var b=0,v=[],w=0;"WATER"===m[g][y+1]?b++:b+=0,"WATER"===m[g][y-1]?b++:b+=0,void 0===m[g+1]?b+=0:"WATER"===m[g+1][y]?b++:b+=0,void 0===m[g-1]?b+=0:"WATER"===m[g-1][y]?b++:b+=0,2===b&&("WATER"===m[g][y+1]&&"WATER"===m[g][y-1]?b=5:b+=0,void 0!==m[g+1]&&void 0!==m[g-1]&&("WATER"===m[g+1][y]&&"WATER"===m[g-1][y]?b=5:b+=0)),"WATER"===m[g][y+1]?v.push(!0):v.push(!1),"WATER"===m[g][y-1]?v.push(!0):v.push(!1),void 0===m[g+1]?v.push(!1):"WATER"===m[g+1][y]?v.push(!0):v.push(!1),void 0===m[g-1]?v.push(!1):"WATER"===m[g-1][y]?v.push(!0):v.push(!1),1===b&&(w=!0===v[0]&&!1===v[1]&&!1===v[2]&&!1===v[3]?90:!1===v[0]&&!1===v[1]&&!0===v[2]&&!1===v[3]?0:!1===v[0]&&!0===v[1]&&!1===v[2]&&!1===v[3]?270:180),2===b&&(w=!1===v[0]&&!0===v[1]&&!1===v[2]&&!0===v[3]?0:!0===v[0]&&!1===v[1]&&!1===v[2]&&!0===v[3]?270:!0===v[0]&&!1===v[1]&&!0===v[2]&&!1===v[3]?180:90),3===b&&(w=!0===v[0]&&!1===v[1]&&!0===v[2]&&!0===v[3]?90:!0===v[0]&&!0===v[1]&&!0===v[2]&&!1===v[3]?0:!1===v[0]&&!0===v[1]&&!0===v[2]&&!0===v[3]?270:180),5===b&&(w=!0===v[0]&&!0===v[1]&&!1===v[2]&&!1===v[3]?0:90),d[g].push({type:m[g][y],variation:b,rotation:w,coords:{x:p,y:h}});break;case"OCEAN":var O=0,k=[],x=0;"OCEAN"===m[g][y+1]?O++:O+=0,"OCEAN"===m[g][y-1]?O++:O+=0,void 0===m[g+1]?O+=0:"OCEAN"===m[g+1][y]?O++:O+=0,void 0===m[g-1]?O+=0:"OCEAN"===m[g-1][y]?O++:O+=0,2===O&&("OCEAN"===m[g][y+1]&&"OCEAN"===m[g][y-1]?O=5:O+=0,void 0!==m[g+1]&&void 0!==m[g-1]&&("OCEAN"===m[g+1][y]&&"OCEAN"===m[g-1][y]?O=5:O+=0)),(O>0&&O<4||5===O)&&("OCEAN"===m[g][y+1]?k.push(!0):k.push(!1),"OCEAN"===m[g][y-1]?k.push(!0):k.push(!1),void 0===m[g+1]?k.push(!1):"OCEAN"===m[g+1][y]?k.push(!0):k.push(!1),void 0===m[g-1]?k.push(!1):"OCEAN"===m[g-1][y]?k.push(!0):k.push(!1),1===O&&(x=!0===k[0]&&!1===k[1]&&!1===k[2]&&!1===k[3]?270:!1===k[0]&&!1===k[1]&&!0===k[2]&&!1===k[3]?180:!1===k[0]&&!0===k[1]&&!1===k[2]&&!1===k[3]?90:0),2===O&&(x=!1===k[0]&&!0===k[1]&&!1===k[2]&&!0===k[3]?0:!0===k[0]&&!1===k[1]&&!1===k[2]&&!0===k[3]?270:!0===k[0]&&!1===k[1]&&!0===k[2]&&!1===k[3]?180:90),3===O&&(x=!0===k[0]&&!1===k[1]&&!0===k[2]&&!0===k[3]?90:!0===k[0]&&!0===k[1]&&!0===k[2]&&!1===k[3]?0:!1===k[0]&&!0===k[1]&&!0===k[2]&&!0===k[3]?270:180),5===O&&(x=!0===k[0]&&!0===k[1]&&!1===k[2]&&!1===k[3]?90:0)),d[g].push({type:m[g][y],variation:O,rotation:x,coords:{x:p,y:h}});break;default:d[g].push({type:m[g][y],variation:0,rotation:0,coords:{x:p,y:h}})}p+=2}p>t[s.mapsize]&&(h+=2,p=0)}d.forEach((function(t){t.forEach((function(t){switch(t.type){case"WATER":e.add(i({x:t.coords.x,y:0,z:t.coords.y},null,t.variation,t.rotation));break;case"OCEAN":e.add(r({x:t.coords.x,y:0,z:t.coords.y},null,t.variation,t.rotation));break;case"FIELD":e.add(n({x:t.coords.x,y:0,z:t.coords.y},null,t.variation,t.rotation));break;default:console.warn("?")}}))})),l.add(e)}},{key:"blockPlacement",value:function(e){return e<=.25?"OCEAN":e<.45&&e>.25?"WATER":"FIELD"}}]),e}(),X=function(){var e=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JSON.parse(t.data);case 2:a=e.sent,console.log(a),e.t0=a.type,e.next="LOGIN"===e.t0?7:"SYSTEM"===e.t0?9:"GAME"===e.t0?11:"REQUEST"===e.t0?13:"ERROR"===e.t0?15:16;break;case 7:return null===a.payload.token?a.payload.id=Q.userToken:null===a.payload.id&&(a.payload.token=Q.userToken),e.abrupt("break",17);case 9:return Q.messageSystem.push(a),e.abrupt("break",17);case 11:return Q.messageGame.push(a),e.abrupt("break",17);case 13:return Q.getRequest.push(a),e.abrupt("break",17);case 15:case 16:return e.abrupt("break",17);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(e){Q.send({type:"EXIT"})},K=function(e){Q.errorMessages.push({type:"client",error:e})},Q={socket:null,userToken:null,systemMessage:[],gameMessage:[],requestReponse:[],errorMessages:[],currentRequest:function(){return this.requestReponse[this.requestReponse.length-1]},init:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ws://localhost:8000/polytopia";try{this.socket=new WebSocket(n),this.socket.onopen=function(){var n={type:"LOGIN",payload:{token:a},id:t,date:Date.now()};e.socket.send(JSON.stringify(n)),e.readyState=e.socket.readyState},this.socket.onmessage=X,this.socket.onclose=Z,this.socket.error=K,this.readyState=this.socket.readyState}catch(r){console.error("Websocket error")}return this},send:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.socket.send(JSON.stringify(Object.assign({},t,{id:this.userToken,date:Date.now()})))}catch(a){console.warn("Did not send msg")}return e.abrupt("return",this);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),quit:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==this.socket&&(this.socket.close(),this.socket=null),e.abrupt("return",this);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),reconnect:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.quit(),this.init(),e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},$=Object(n.createContext)();var ee=function(e){var t=e.children,a=e.data,i=Object(n.useState)(!1),c=Object(f.a)(i,2),o=c[0],l=c[1],s=Object(n.useState)("custom"),u=Object(f.a)(s,2),m=u[0],d=u[1],E=Object(n.useState)({}),g=Object(f.a)(E,2),y=g[0],b=g[1],v=Object(n.useState)([]),w=Object(f.a)(v,2),O=w[0],k=w[1];return Object(n.useEffect)((function(){(function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="true"===a.mp,l(t),d(a.mode),k(O.concat([{id:"",score:0,faction:"",tech:[],stars:5}])),b(O[0]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement($.Provider,{value:{mp:o,mode:m,players:O,currentPlayer:y}},t)},te=(a(471),a(168)),ae=a.n(te),ne=function(e){function t(){var e;return Object(x.a)(this,t),(e=Object(j.a)(this,Object(N.a)(t).call(this))).handleResize=function(t){e.renderer.setSize(window.innerWidth,window.innerHeight),e.composer.setSize(window.innerWidth,window.innerHeight),e.renderer.setPixelRatio(window.devicePixelRatio),e.composer.setPixelRatio(window.devicePixelRatio),e.camera.aspect=window.innerWidth/window.innerHeight,e.camera.updateProjectionMatrix()},e.animate=function(){var t=e.clock.getDelta();e.st.begin(),e.frameId=requestAnimationFrame(e.animate),e.cameraControls.update(t),e.entityManager.update(t),e.composer.render(),e.st.end()},e.entityManager=new C.a,e.scene=new A.Scene,window.scene=e.scene,e.clock=new A.Clock,e.renderer=new A.WebGLRenderer({antialias:!1}),e.composer=new R.a(e.renderer),e.quaryData=H(),e}return Object(T.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.st=new ae.a,this.st.showPanel(1),document.body.appendChild(this.st.dom),M.a.install({THREE:A}),this.renderer.shadowMap.enabled=!0,this.mount.appendChild(this.renderer.domElement),this.camera=new A.OrthographicCamera(window.innerWidth/-200,window.innerWidth/200,window.innerHeight/200,window.innerHeight/-200,1,1e3),this.camera.position.set(53,57,57),this.camera.rotation.set(-.965,.505,.61),this.camera.zoom=.16401226550047032,this.camera.updateProjectionMatrix(),this.composer.addPass(new I.a(this.scene,this.camera));var t=new _.a(new A.Vector2(window.innerWidth,window.innerHeight),this.scene,this.camera);t.edgeStrength=5,t.edgeGlow=0,t.edgeThickness=3,t.pulsePeriod=0,t.hiddenEdgeColor.set("#ffffff"),t.visibleEdgeColor.set(255),this.composer.addPass(t);var a=new G.a(L.a);a.uniforms.resolution.value.set(1/window.innerWidth,1/window.innerHeight),this.composer.addPass(a);var n=new A.Box3(new A.Vector3(20,0,20),new A.Vector3(50,50,50));this.cameraControls=new M.a(this.camera,this.renderer.domElement),this.cameraControls.dollySpeed=.9,this.cameraControls.maxZoom=.5,this.cameraControls.minZoom=.09,this.cameraControls.setBoundary(n),new P.a(this.renderer,this.scene,this.camera),this.renderer.setSize(window.innerWidth,window.innerHeight),this.composer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.composer.setPixelRatio(window.devicePixelRatio),this.camera.aspect=window.innerWidth/window.innerHeight,window.addEventListener("resize",this.handleResize,!1);var r=new A.Group,i=new A.DirectionalLight(14548957,.6);i.position.set(0,200,0),i.rotation.set(25,0,0),i.castShadow=!0,i.shadow.mapSize.width=1024,i.shadow.mapSize.height=1024,r.add(i);var c=new A.HemisphereLight;r.add(c),r.add(new A.AmbientLight(11184810,.2)),this.scene.add(r),setTimeout((function(){e.scene.background=e.props.assets.textures.background,new J(e.props.assets,{scene:e.scene,data:e.quaryData}).createWorld()}),1e3),this.frameId?this.animate():this.frameId=requestAnimationFrame(this.animate)}},{key:"componentWillUnmount",value:function(){Q.send({type:"EXIT"}),cancelAnimationFrame(this.frameId),this.mount.removeChild(this.renderer.domElement)}},{key:"render",value:function(){var e=this;return r.a.createElement(ee,{data:this.quaryData},r.a.createElement("div",{id:"three-scene",ref:function(t){e.mount=t}},this.props.children))}}]),t}(n.Component),re=Object(u.b)((function(e){return{assets:e.gameAssetsLoad.assets}}),(function(e){return{}}))(ne),ie=a(22),ce=a(169),oe="GAMEASSETSLOAD_PENDING",le="GAMEASSETSLOAD_ERROR",se="GAMEASSETSLOAD_COMPLETE",ue="GAMEASSETSLOAD_PROGRESS",me=a(170),de=a.n(me),pe=a(171),he=a.n(pe),fe=a(172),Ee=a.n(fe),ge=a(173),ye=a.n(ge),be=a(174),ve=a.n(be),we=a(175),Oe=a.n(we),ke=a(176),xe=a.n(ke),Se=a(177),je=a.n(Se),Ne=a(178),Te=a.n(Ne),Ae=a(179),Ce=a.n(Ae),Me=a(180),Pe=a.n(Me),Re=a(181),Ie=a.n(Re),_e=a(182),Le=a.n(_e),Ge=a(183),De=a.n(Ge),We=a(184),Ue=a.n(We),qe=a(185),ze=a.n(qe),Be=a(186),He=a.n(Be),Fe=a(187),Ye=a.n(Fe),Ve=a(188),Je=a.n(Ve),Xe=a(189),Ze=a.n(Xe),Ke=a(190),Qe=a.n(Ke),$e=a(191),et=a.n($e),tt=a(192),at=a.n(tt),nt=a(193),rt=a.n(nt),it=a(194),ct=a.n(it),ot=a(195),lt=a.n(ot),st=a(196),ut=a.n(st),mt=a(197),dt=a.n(mt),pt=a(198),ht=a.n(pt),ft=a(199),Et=a.n(ft),gt=a(200),yt=a.n(gt),bt=a(201),vt=a.n(bt),wt=a(202),Ot=a.n(wt),kt=a(203),xt=a.n(kt),St=a(204),jt=a.n(St),Nt=a(205),Tt=a.n(Nt),At=a(206),Ct=a.n(At),Mt={field:{geometry:{},material:{}},cloud:{geometry:{},material:{}},water:{geometry:{},material:{}},ocean:{geometry:{},material:{}},tree:{geometry:{},material:{}},fruit:{geometry:{},material:{}},slector:{geometry:{},material:{}}},Pt=new A.LoadingManager,Rt=new A.TextureLoader(Pt),It=new ce.a(Pt).setResourcePath("./textures/"),_t=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,It.load(rt.a,(function(e){e.preload(),new ie.a(Pt).setMaterials(e).load(Ye.a,(function(e){Mt.water.geometry[0]=e.children[0].geometry,Mt.water.material[0]=e.children[0].material}))}));case 2:return e.next=4,It.load(ht.a,(function(e){e.preload(),new ie.a(Pt).setMaterials(e).load(at.a,(function(e){Mt.water.geometry[1]=e.children[0].geometry,Mt.water.material[1]=e.children[0].material}))}));case 4:return e.next=6,It.load(ut.a,(function(e){e.preload(),new ie.a(Pt).setMaterials(e).load(Qe.a,(function(e){Mt.water.geometry[2]=e.children[0].geometry,Mt.water.material[2]=e.children[0].material}))}));case 6:return e.next=8,It.load(lt.a,(function(e){e.preload(),new ie.a(Pt).setMaterials(e).load(Ze.a,(function(e){Mt.water.geometry[3]=e.children[0].geometry,Mt.water.material[3]=e.children[0].material}))}));case 8:return e.next=10,It.load(ct.a,(function(e){e.preload(),new ie.a(Pt).setMaterials(e).load(Je.a,(function(e){Mt.water.geometry[4]=e.children[0].geometry,Mt.water.material[4]=e.children[0].material}))}));case 10:return e.next=12,It.load(dt.a,(function(e){e.preload(),new ie.a(Pt).setMaterials(e).load(et.a,(function(e){Mt.water.geometry[5]=e.children[0].geometry,Mt.water.material[5]=e.children[0].material}))}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Lt=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,It.load(Ie.a,(function(e){e.preload(),new ie.a(Pt).setMaterials(e).load(Oe.a,(function(e){Mt.ocean.geometry[0]=e.children[0].geometry,Mt.ocean.material[0]=e.children[0].material}))}));case 2:return e.next=4,It.load(He.a,(function(e){e.preload(),new ie.a(Pt).setMaterials(e).load(Pe.a,(function(e){Mt.ocean.geometry[1]=e.children[0].geometry,Mt.ocean.material[1]=e.children[0].material}))}));case 4:return e.next=6,It.load(Ue.a,(function(e){e.preload(),new ie.a(Pt).setMaterials(e).load(Te.a,(function(e){Mt.ocean.geometry[2]=e.children[0].geometry,Mt.ocean.material[2]=e.children[0].material}))}));case 6:return e.next=8,It.load(De.a,(function(e){e.preload(),new ie.a(Pt).setMaterials(e).load(je.a,(function(e){Mt.ocean.geometry[3]=e.children[0].geometry,Mt.ocean.material[3]=e.children[0].material}))}));case 8:return e.next=10,It.load(Le.a,(function(e){e.preload(),new ie.a(Pt).setMaterials(e).load(xe.a,(function(e){Mt.ocean.geometry[4]=e.children[0].geometry,Mt.ocean.material[4]=e.children[0].material}))}));case 10:return e.next=12,It.load(ze.a,(function(e){e.preload(),new ie.a(Pt).setMaterials(e).load(Ce.a,(function(e){Mt.ocean.geometry[5]=e.children[0].geometry,Mt.ocean.material[5]=e.children[0].material}))}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Gt=function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(j.a)(this,Object(N.a)(t).call(this,e))).state={error:"",hasError:!1},a}return Object(T.a)(t,e),Object(S.a)(t,[{key:"componentDidCatch",value:function(e){this.setState({error:e,hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("div",null,"Componet Error"):this.props.children}}]),t}(n.Component),Dt=(a(472),a(207)),Wt=a.n(Dt),Ut=(a(473),function(){return r.a.createElement("button",{className:"back-button",onClick:function(){window.history.back()}},r.a.createElement("img",{src:Wt.a,alt:"back Icon"}))}),qt=(a(474),function(){return r.a.createElement("div",{id:"about"},r.a.createElement(Ut,null),r.a.createElement("h1",null,"-ABOUT-"),r.a.createElement("section",null,r.a.createElement("h3",null,"-Debug Info-"),r.a.createElement("p",null,"Build version . . . . . ",F.data.build),r.a.createElement("p",null,"THREE Revision . . . . . . . .",A.REVISION),r.a.createElement("p",null,"Screen size . . . . . . . . . ","".concat(window.innerHeight,"x").concat(window.innerWidth))))}),zt=(a(475),function(){return r.a.createElement("div",{className:"lds"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}),Bt=(a(476),function(){var e=k(),t=e.isAuthenticated,a=e.user;return t?r.a.createElement("div",{id:"throneroom"},r.a.createElement(Ut,null),r.a.createElement("h1",null,"-THRONE ROOM-"),r.a.createElement("section",{id:"tr-player"},r.a.createElement("h4",null,"-Player Info"),r.a.createElement("p",null,"Alias . . . . . . .  ",a.name),r.a.createElement("p",null,"Games Played . . . ","GET_GAMESPLAYED")),r.a.createElement("section",null,r.a.createElement("h4",null,"-Top Score-"),[].length>0?r.a.createElement("p",null,"CONTETN"):r.a.createElement(zt,null)),r.a.createElement("section",null,r.a.createElement("h4",null,"-Top Rating-"),[].length>0?r.a.createElement("p",null,"CONTETN"):r.a.createElement(zt,null))):r.a.createElement("div",{id:"throneroom"},r.a.createElement(Ut,null),r.a.createElement("h1",null,"-THRONE ROOM-"),r.a.createElement("h3",null,"Plesse Login to View"))}),Ht=a(34),Ft=a.n(Ht),Yt=(a(477),[r.a.createElement("div",{className:"menu-item",key:"all_tribes"},"All Tribes"),r.a.createElement("div",{className:"menu-item",key:"xin_xi"},"Xin-xi"),r.a.createElement("div",{className:"menu-item",key:"imperius"},"Imperius"),r.a.createElement("div",{className:"menu-item",key:"bardar"},"Bardar"),r.a.createElement("div",{className:"menu-item",key:"oumaji"},"Oumaji"),r.a.createElement("div",{className:"menu-item",key:"vengir"},"Vengir")]),Vt=function(){return r.a.createElement("div",{id:"highscore"},r.a.createElement(Ut,null),r.a.createElement("h1",null,"-HIGH SCORE-"),r.a.createElement(Ft.a,{selected:"vengir",data:Yt,wrapperClass:"hr-menu"}),r.a.createElement("section",null,[].length>0?r.a.createElement("p",null,"CONTENT"):r.a.createElement(zt,null)))},Jt=(a(478),a(479),function(e){var t=e.id,a=e.text,n=e.checked,i=e.change;return void 0===n&&(n=!0),r.a.createElement("div",{className:"toggle-button"},r.a.createElement("h5",null,a),r.a.createElement("input",{className:"tgl tgl-skewed",id:t,type:"checkbox",defaultChecked:n,onChange:function(e){i(e)}}),r.a.createElement("label",{className:"tgl-btn","data-tg-on":"ON","data-tg-off":"OFF",htmlFor:t}))}),Xt=(a(480),function(e){var t,a=e.text,n=e.isUri,i=e.callback,c=e.warn,o=e.disable;return t=n?function(){l.a.navigate(i.uri,i.params)}:i,r.a.createElement("button",{disabled:o,onClick:t,className:"normal-button ".concat(c?"warn":""," ").concat(o?"disable":"")},a)}),Zt=function(e,t){switch(t.type){case"set":return B.set(t.payload,e);default:return e}},Kt=function(e){var t,a=e.menu;void 0===a&&(a=!1),t=B.isVaild()?B.get():B.default;var i=Object(n.useReducer)(Zt,t),c=Object(f.a)(i,2),o=c[0],l=c[1];return r.a.createElement("div",{id:"settings"},r.a.createElement(Ut,null),r.a.createElement("h1",null,"-SETTINGS-"),r.a.createElement("section",{id:"audio-select"},r.a.createElement("p",null,"Audio volume ",o.volume),r.a.createElement("div",{className:"slidecontainer"},r.a.createElement("input",{type:"range",min:"0",max:"100",defaultValue:t.volume,id:"audio",onChange:function(e){return l({type:"set",payload:{volume:e.target.value}})}}))),r.a.createElement("section",null,r.a.createElement(Jt,{checked:t.sound_effects,id:"soundEffect",text:"Sound Effects",change:function(e){return l({type:"set",payload:{sound_effects:e.target.checked}})}}),r.a.createElement(Jt,{checked:t.ambience,id:"ambience",text:"Ambience",change:function(e){return l({type:"set",payload:{ambience:e.target.checked}})}}),r.a.createElement(Jt,{checked:t.tribe_music,id:"tribeMusic",text:"Tribe Music",change:function(e){return l({type:"set",payload:{tribe_music:e.target.checked}})}})),r.a.createElement("hr",null),r.a.createElement("section",null,r.a.createElement(Jt,{checked:t.suggestions,id:"suggestions",text:"Suggestions",change:function(e){return l({type:"set",payload:{suggestions:e.target.checked}})}}),r.a.createElement(Jt,{checked:t.info_on_build,id:"infoOnBuild",text:"Info On Build",change:function(e){return l({type:"set",payload:{info_on_build:e.target.checked}})}}),r.a.createElement(Jt,{checked:t.confirm_turn,id:"confirmTurn",text:"Confirm Turn",change:function(e){return l({type:"set",payload:{confirm_turn:e.target.checked}})}})),a?r.a.createElement("hr",null):null,a?r.a.createElement(Xt,{text:"EXIT GAME",warn:!0,isUri:!0,callback:{uri:"/main",params:{}}}):null)},Qt=(a(481),function(e){var t,a=e.children,n=e.text,i=e.uri,c=e.disable,o=void 0!==c&&c;return t="string"===typeof i||"object"===typeof i?"string"===typeof i?function(){l.a.navigate(i)}:function(){l.a.navigate(i.uri,i.params)}:i,r.a.createElement("div",{className:"icon-button"},r.a.createElement("button",{onClick:t,disabled:o},a),r.a.createElement("p",null,n))}),$t=a(70),ea=a.n($t),ta=a(208),aa=a.n(ta),na=a(209),ra=a.n(na),ia=(a(482),function(e){var t=e.saved,a=k(),n=a.isAuthenticated,i=a.loginWithPopup,c=a.logout;return r.a.createElement("div",{id:"main-menu"},n?r.a.createElement(b.Button,{type:"primary",size:"large",outline:!1,className:"log-out-in",onClick:function(){c({returnTo:"http://localhost:3000"})}},r.a.createElement("img",{src:ra.a,alt:"Logout",className:"img-out"})):r.a.createElement(b.Button,{type:"primary",size:"large",outline:!1,className:"log-out-in",onClick:function(){i()}},r.a.createElement("img",{src:aa.a,alt:"Login",className:"img-in"})),r.a.createElement("div",{className:"Logo"},r.a.createElement("img",{src:"",alt:"Main icon"}),r.a.createElement("p",null,"---THE BATTLE OF ---"),r.a.createElement("h1",null,"POLYTOPIA")),r.a.createElement("div",{className:"main"},r.a.createElement(Xt,{text:"NEW GAME",isUri:!0,callback:{uri:"/main/singleplayer/mode",params:{}}}),t?r.a.createElement(Xt,{text:"RESUME GAME",isUri:!0,callback:{uri:"/game",params:{}}}):null,r.a.createElement(Xt,{text:"MULTIPLAYER",isUri:!0,callback:{uri:"/main/multiplayer",params:{}}})),r.a.createElement("section",{id:"menu-nav"},r.a.createElement(Qt,{text:"Settings",uri:"/main/settings"},r.a.createElement("img",{src:ea.a,alt:"Menu ICON"})),r.a.createElement(Qt,{text:"throneroom",uri:"/main/throneroom"}),r.a.createElement(Qt,{text:"Highscore",uri:"/main/highscore"}),r.a.createElement(Qt,{text:"About",uri:"/main/about"})))}),ca=(a(101),function(e){var t=e.name,a=e.prevQuary,n=e.setShowTribe;return r.a.createElement("div",{id:"tribe-data"},r.a.createElement("h4",null,t),r.a.createElement("img",{src:"",alt:"tribe view"}),r.a.createElement("p",null,"Lorm"),r.a.createElement("p",null,"Lorm"),r.a.createElement("section",null,r.a.createElement("p",null,"Score"),r.a.createElement("p",null,"next")),r.a.createElement("div",null,r.a.createElement(Xt,{text:"CANCEL",isUri:!1,callback:function(){n(null)}}),r.a.createElement(Xt,{text:"PICK",isUri:!0,callback:{uri:"/main/singleplayer/setup",params:{queryParams:{mode:a.mode,players:"player_".concat(t)}}}})))}),oa=function(){var e=H(),t=Object(n.useState)(""),a=Object(f.a)(t,2),i=a[0],c=a[1];return r.a.createElement("div",{id:"sp-tribe"},r.a.createElement(Ut,null),r.a.createElement("h1",null,"-PICK YOUR TRIBE-"),r.a.createElement("section",null,r.a.createElement("div",null,r.a.createElement(Qt,{text:"Xin-Xi",uri:function(){c("xin-xi")}}),r.a.createElement(Qt,{text:"Bardar",uri:function(){c("bardar")}}),r.a.createElement(Qt,{text:"Imperius",uri:function(){c("imperius")}})),r.a.createElement("div",null,r.a.createElement(Qt,{text:"Oumaji",uri:function(){c("oumaji")}}),r.a.createElement(Qt,{text:"Vengir",uri:function(){c("vengir")}}))),r.a.createElement("section",{id:"sp-tribe-random"},r.a.createElement("p",null,"-Let fate decide!-"),r.a.createElement(Xt,{text:"RANDOM",isUri:!0,callback:{uri:"/main/singleplayer/setup",params:{queryParams:{mode:e.mode,player:"player_random"}}}})),function(e,t,a){switch(e){case"xin-xi":case"imperius":case"bardar":case"oumaji":case"vengir":return r.a.createElement(ca,{name:e,prevQuary:t,setShowTribe:a});default:return null}}(i,e,c))},la=function(){return r.a.createElement("div",{id:"sp-mode"},r.a.createElement(Ut,null),r.a.createElement("h1",null,"-GAME MODE-"),r.a.createElement("section",null,r.a.createElement("button",{className:"normal-button",onClick:function(){l.a.navigate("/main/singleplayer/tribe",{queryParams:{mode:"perfection"}})}},r.a.createElement("img",{src:"",alt:"perfection_icon"}),r.a.createElement("h3",null,"PERFECTION"),r.a.createElement("p",null,"Show your skills on the golobal highscore in the classic 30 turns game.")),r.a.createElement("button",{className:"normal-button",onClick:function(){l.a.navigate("/main/singleplayer/tribe",{queryParams:{mode:"domination"}})}},r.a.createElement("img",{src:"",alt:"domination_icon"}),r.a.createElement("h3",null,"DOMINATION"),r.a.createElement("p",null,"Play until there is only one tribe left, with no time limit.")),r.a.createElement("button",{className:"normal-button",onClick:function(){l.a.navigate("/main",{queryParams:{mode:"custom"}})}},r.a.createElement("img",{src:"",alt:"custommode_icon"}),r.a.createElement("h3",null,"CUSTOM"),r.a.createElement("p",null,"Play custom created modes you created or the community."))))},sa=[1,2,3,4],ua=[121,256,324,400],ma=["Easy","Normal","Hard","Crazy"],da=function(e){return e.map((function(e){return r.a.createElement("div",{className:"scrollmenu-item",key:e},e)}))},pa=function(){var e,t=Object(n.useState)(121),a=Object(f.a)(t,2),i=a[0],c=a[1],o=Object(n.useState)("NORMAL"),l=Object(f.a)(o,2),s=l[0],u=l[1],m=Object(n.useState)(1),d=Object(f.a)(m,2),p=d[0],h=d[1];return r.a.createElement("div",{id:"sp-setup"},r.a.createElement(Ut,null),r.a.createElement("h1",null,"-GAME SETUP-"),r.a.createElement("section",null,r.a.createElement("h5",null,"Opponents"),r.a.createElement(Ft.a,{selected:1,onSelect:function(e){h(e)},data:da(sa)})),r.a.createElement("section",null,r.a.createElement("h5",null,"World Size"),r.a.createElement(Ft.a,{selected:121,onSelect:function(e){c(e)},data:da(ua),useButtonRole:!0})),r.a.createElement("section",null,r.a.createElement("h5",null,"Difficulty"),r.a.createElement(Ft.a,{selected:"Easy",onSelect:function(e){u(e)},data:da(ma)})),r.a.createElement(Xt,{text:"Start Game",isUri:!0,callback:{uri:"/game",params:{replace:!0,queryParams:(e={savedgame:!1,mp:!1,opponents:p,mapsize:i,diff:s.toUpperCase()},Object.assign({},e,H()))}}}))},ha=(a(50),a(210)),fa=a.n(ha),Ea=function(){var e=[];z()&&(e=q().map((function(e){return r.a.createElement("button",{className:"saved",key:e.id},r.a.createElement("img",{src:"",alt:"randomIcon"}),r.a.createElement("h5",null,e.name))})));return e},ga=function(){var e=k(),t=e.isAuthenticated,a=e.getTokenSilently,i=e.user,c=Object(n.useState)(!1),o=Object(f.a)(c,2),s=o[0],u=o[1],m=Object(n.useState)(!1),d=Object(f.a)(m,2),p=d[0],h=d[1],E=Object(n.useState)([]),g=Object(f.a)(E,2),y=g[0],v=g[1],w=Object(n.useState)(Ea()),O=Object(f.a)(w,2),x=O[0],S=O[1];return Object(n.useEffect)((function(){h(!1),v([]),S(Ea()),F.data.settings.forceLogin&&u(!t),t&&null===Q.socket&&a().then((function(e){Q.init(i.sub.replace("auth0|",""),e)}))}),[t,i.sub,a]),r.a.createElement("div",{id:"multiplayer"},r.a.createElement(b.Modal,{visible:s,maskCloseAble:!1,width:500,height:300,title:"Login",footer:[r.a.createElement(b.Button,{key:"ok",type:"primary",onClick:function(){l.a.navigate("/main")}},"Ok")]},r.a.createElement("h3",null,"Please login to use the multiplayer component")),r.a.createElement(Ut,null),r.a.createElement("h1",null,"-MULTIPLAYER-"),r.a.createElement("h3",null,"-".concat(p?"Your":"Their"," Turn-")),y.length>0?r.a.createElement("div",null):r.a.createElement(zt,null),r.a.createElement("h3",null,"-Pass & Play-"),x.length>0?x:r.a.createElement(zt,null),r.a.createElement("section",null,F.data.settings.production?r.a.createElement(Qt,{uri:"/main/multiplayer/new-game/setup",text:"New Game"},r.a.createElement("img",{src:fa.a,alt:"NewGame"})):null,r.a.createElement(Qt,{uri:"/main/multiplayer/friends",text:"Friends"})))},ya=function(){return r.a.createElement("div",{id:"mp-friends"},r.a.createElement(Ut,null),r.a.createElement("h1",null,"-FRIENDS LIST-"),r.a.createElement("h5",null,"-Friends-"),r.a.createElement(zt,null),r.a.createElement(Xt,{text:"NEW FRIEND",isUri:!1,callback:function(){}}))},ba=function(){var e=Object(n.useState)("local"),t=Object(f.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)("might"),o=Object(f.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)("tiny"),m=Object(f.a)(u,2),d=m[0],p=m[1];return r.a.createElement("div",{id:"mp-setup"},r.a.createElement(Ut,null),r.a.createElement("h1",null,"-SETUP-"),r.a.createElement("div",null,r.a.createElement("h6",null,"Network"),r.a.createElement(Ft.a,{data:[r.a.createElement("button",{onClick:function(){return i("online")},key:"online"},"Online"),r.a.createElement("button",{onClick:function(){return i("local")},key:"local"},"Pass & Play")]})),r.a.createElement("p",null,"Lorm ipsom"),r.a.createElement("div",null,r.a.createElement("h6",null,"Game Mode"),r.a.createElement(Ft.a,{data:[r.a.createElement("div",{onClick:function(){return s("glory")},key:"glory"},"Glory"),r.a.createElement("div",{onClick:function(){return s("might")},key:"might"},"Might")]})),r.a.createElement("p",null,"Lorm Ipsom"),r.a.createElement("div",null,r.a.createElement("h6",null,"Map Size"),r.a.createElement(Ft.a,{data:[r.a.createElement("div",{onClick:function(){p("tiny")},key:"tiny"},"tiny"),r.a.createElement("div",{onClick:function(){return p("normal")},key:"normal"},"normal"),r.a.createElement("div",{onClick:function(){return p("large")},key:"large"},"large"),r.a.createElement("div",{onClick:function(){return p("mega")},key:"mega"},"mega"),r.a.createElement("div",{onClick:function(){return p("ultra")},key:"ultra"},"ultra")]})),r.a.createElement("p",null,"".concat(999," tiles map.")),r.a.createElement(Xt,{text:"CONTINUE",isUri:!0,callback:{uri:"/main/multiplayer/new-game/players",params:{queryParams:{network:a,mode:l,mapSize:d}}}}))},va=function(){var e=Object(n.useState)(H()),t=Object(f.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)(void 0===a.players?0:a.players.length),o=Object(f.a)(c,2),l=o[0],s=o[1],u=null;return a.players&&(u=a.players.map((function(e){return r.a.createElement("div",{key:e},r.a.createElement("img",{src:"",alt:"head"}),r.a.createElement("h6",null,e),r.a.createElement("button",{onClick:function(){var t,n;s(l-1),i((t=e,n=a,Object.assign({},n,{players:n.players.filter((function(e){return e!==t}))})))}},"X"))}))),r.a.createElement("div",{id:"player-mp"},r.a.createElement(Ut,null),r.a.createElement("h1",null,"-PICK PLAYERS-"),r.a.createElement("h5",null,"-Game Name-"),r.a.createElement("input",{type:"text",readOnly:!0,defaultValue:"RANDOM_NAME"}),r.a.createElement("div",null,r.a.createElement("p",null,"Map Size: ".concat(324)),r.a.createElement("p",null,"Game Mode: ".concat("Might")),r.a.createElement("p",null,"MODE_TEXT"),r.a.createElement("hr",null),r.a.createElement("h5",null,"-Players (".concat(l,"/5)-")),u,r.a.createElement(Xt,{text:"ADD PLAYER",isUri:!0,callback:{uri:"/main/multiplayer/new-game/add",params:{queryParams:a}}}),r.a.createElement("hr",null),r.a.createElement(Xt,{disable:!(l>=2),text:"START GAME",isUri:!0,callback:{uri:"/main/multiplayer/new-game/tribes",params:{replace:!0,queryParams:Object.assign({},{mp:!0,savedgame:!1},a)}}})))},wa=function(){return"local"===H().network||Q.send({type:"get",request:"slectedTribes",ofGameID:"CURRENT_GAME_ID"}),r.a.createElement("div",{id:"tribes-mp"},r.a.createElement(Ut,null))},Oa=function(){var e=H(),t="local"===e.network,a=e.players||[],n=!1;return e.players&&5===e.players.length&&(n=!0),t||Q.send({type:"get",request:"friendsList",ofUser:"USER_TEMP",status:204}),r.a.createElement("div",{id:"tribes-mp"},r.a.createElement(Ut,null),r.a.createElement("h1",null,"-FRIEND LIST-"),r.a.createElement("div",null,r.a.createElement("h5",null,"-Local Players-"),r.a.createElement("section",null,r.a.createElement(Qt,{disable:n,text:"Player 1",uri:{uri:"/main/multiplayer/new-game/players",params:{queryParams:Object.assign({},e,{players:a.concat("player1_na")})}}}),r.a.createElement(Qt,{disable:n,text:"Player 2",uri:{uri:"/main/multiplayer/new-game/players",params:{queryParams:Object.assign({},e,{players:a.concat("player2_na")})}}}),r.a.createElement(Qt,{disable:n,text:"Player 3",uri:{uri:"/main/multiplayer/new-game/players",params:{queryParams:Object.assign({},e,{players:a.concat("player3_na")})}}}),r.a.createElement(Qt,{disable:n,text:"Player 4",uri:{uri:"/main/multiplayer/new-game/players",params:{queryParams:Object.assign({},e,{players:a.concat("player4_na")})}}}),r.a.createElement(Qt,{disable:n,text:"Player 5",uri:{uri:"/main/multiplayer/new-game/players",params:{queryParams:Object.assign({},e,{players:a.concat("player5_na")})}}}))),r.a.createElement("h5",null,"-Bots-"),r.a.createElement("section",null,r.a.createElement(Qt,{disable:n,text:"Easy Bot",uri:{uri:"/main/multiplayer/new-game/players",params:{queryParams:Object.assign({},e,{players:a.concat("botEasy_random")})}}}),r.a.createElement(Qt,{disable:n,text:"Normal Bot",uri:{uri:"/main/multiplayer/new-game/players",params:{queryParams:Object.assign({},e,{players:a.concat("botNormal_random")})}}}),r.a.createElement(Qt,{disable:n,text:"Hard Bot",uri:{uri:"/main/multiplayer/new-game/players",params:{queryParams:Object.assign({},e,{players:a.concat("botHard_random")})}}}),r.a.createElement(Qt,{disable:n,text:"Crazy Bot",uri:{uri:"/main/multiplayer/new-game/players",params:{queryParams:Object.assign({},e,{players:a.concat("botCrazy_random")})}}})))},ka=a(59),xa=function(){(new ka.c).to("#view-block",.8,{y:200,ease:ka.b.easeIn}),setTimeout((function(){l.a.navigate("/game")}),805)},Sa=a(211),ja=a.n(Sa),Na=(a(483),function(){Object(n.useEffect)((function(){(new ka.c).from("#view-block",1,{y:100,ease:ka.a.easeOut})}),[]);var e=H(),t=window.scene.getObjectById(Number(e.blockId));return window.scene.getObjectByName("slector_player_random").position.set(t.position.x,2,t.position.z),r.a.createElement("div",{id:"view-block"},r.a.createElement("section",null,r.a.createElement("img",{src:"",alt:"block icon"}),r.a.createElement("div",null,r.a.createElement("h3",null,t.userData.type),r.a.createElement("p",null)),r.a.createElement("button",{onClick:xa},r.a.createElement("img",{src:ja.a,alt:"hide"}))),Object.keys(t.userData.canBuild).length>0?r.a.createElement(Ft.a,{data:[r.a.createElement(Qt,{text:"Fram"})],menuClass:"view-scroll"}):null)}),Ta=function(){var e=Object(n.useState)({text:"Next Turn",class:"nb-default"}),t=Object(f.a)(e,2),a=t[0];t[1];return r.a.createElement("div",{id:"nav-game"},r.a.createElement(Qt,{text:"Menu",uri:"/game/menu"},r.a.createElement("img",{src:ea.a,alt:"Game Menu"})),r.a.createElement(Qt,{text:"Game Stats"}),r.a.createElement(Qt,{text:"Tech Tree"}),r.a.createElement(Qt,{text:a.text}))},Aa=function(e){function t(){var e;return Object(x.a)(this,t),(e=Object(j.a)(this,Object(N.a)(t).call(this))).state={savedGame:!1,savedGameObject:{},location:"MAIN",inGame:"NONE",hasBefore:!1},e}return Object(T.a)(t,e),Object(S.a)(t,[{key:"goTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l.a.navigate(e,t)}},{key:"componentDidMount",value:function(){var e=this;this.props.loadGameAssets(),F.load(),l.a.setRoutes({"/game":{target:{showGame:function(){e.setState({location:"GAME",inGame:"NONE"})},show:function(t){e.setState({inGame:t.uri.replace("/game/","").replace(/\/(ocean|field|water)$/,"").toUpperCase()})}},"/":"showGame","/view":{"/:type":"show"},"/tech":{"/:type":"show"},"/stats":"show","/menu":"show"},"/main":{target:{index:function(){e.setState({location:"MAIN"})},show:function(t){e.setState({location:t.uri.replace("/main/","").toUpperCase()})}},"/":"index","/singleplayer":{target:{show:function(t){e.setState({location:t.uri.replace("/main/","").toUpperCase()})}},"/mode":"show","/tribe":"show","/setup":"show"},"/multiplayer":{target:{show:function(t){e.setState({location:t.uri.replace("/main/","").toUpperCase()})}},"/":"show","/new-game":{target:{show:function(t){e.setState({location:t.uri.replace("/main/multiplayer/","").toUpperCase()})}},"/setup":"show","/players":"show","/tribes":"show","/add":"show"},"/friends":"show","/:game":"game"},"/settings":"show","/highscore":"show","/throneroom":"show","/about":"show"}}),l.a.dispatch(),this.state.hasBefore||(this.goTo("/main",{replace:!0}),this.setState({hasBefore:!0}))}},{key:"loadContent",value:function(e){switch(e){case"MAIN":return r.a.createElement(ia,{saved:U()});case"SETTINGS":return r.a.createElement(Kt,{menu:!1});case"ABOUT":return r.a.createElement(qt,null);case"HIGHSCORE":return r.a.createElement(Vt,null);case"THRONEROOM":return r.a.createElement(Bt,null);case"SINGLEPLAYER/MODE":return r.a.createElement(la,null);case"SINGLEPLAYER/TRIBE":return r.a.createElement(oa,null);case"SINGLEPLAYER/SETUP":return r.a.createElement(pa,null);case"MULTIPLAYER":return r.a.createElement(ga,null);case"MULTIPLAYER/FRIENDS":return r.a.createElement(ya,null);case"NEW-GAME/SETUP":return r.a.createElement(ba,null);case"NEW-GAME/PLAYERS":return r.a.createElement(va,null);case"NEW-GAME/TRIBES":return r.a.createElement(wa,null);case"NEW-GAME/ADD":return r.a.createElement(Oa,null);default:throw new Error("LOCATION CHANGE ERROR")}}},{key:"inGameContent",value:function(e){switch(e){case"NONE":return r.a.createElement(Ta,null);case"VIEW":return r.a.createElement(Na,null);case"TECH":case"TECH/ITEM":case"STATS":return null;case"MENU":return r.a.createElement(Kt,{menu:!0});default:return null}}},{key:"render",value:function(){var e=this.state,t=e.location,a=e.inGame;return r.a.createElement(Gt,null,"GAME"!==t?r.a.createElement("div",{className:"background"},this.loadContent(t)):r.a.createElement(re,null,this.inGameContent(a)))}}]),t}(n.Component),Ca=Object(u.b)((function(e){return{of:e.gameAssetsLoad.progress.of,item:e.gameAssetsLoad.progress.item,isPending:e.gameAssetsLoad.isPending,loadError:e.gameAssetsLoad.error}}),(function(e){return{loadGameAssets:function(){return e((function(e){Pt.onStart=function(){e({type:oe})},Pt.onLoad=function(){e({type:se,payload:Mt})},Pt.onError=function(t){e({type:le,payload:t})},Pt.onProgress=function(t,a,n){e({type:ue,payload:{item:a,of:n}})},Rt.load(de.a,(function(e){Mt.textures={background:e}})),_t(),Lt(),It.load(Ee.a,(function(e){e.preload(),new ie.a(Pt).setMaterials(e).load(he.a,(function(e){Mt.field.geometry[0]=e.children[0].geometry,Mt.field.material[0]=e.children[0].material}))})),It.load(yt.a,(function(e){e.preload(),new ie.a(Pt).setMaterials(e).load(Et.a,(function(e){Mt.cloud.geometry[0]=e.children[0].geometry,Mt.cloud.material[0]=e.children[0].material}))})),It.load(Tt.a,(function(e){e.preload(),new ie.a(Pt).setMaterials(e).load(xt.a,(function(e){Mt.tree.geometry[0]=e.children[0].geometry,Mt.tree.material[0]=e.children[0].material,It.load(Ct.a,(function(e){e.preload(),new ie.a(Pt).setMaterials(e).load(jt.a,(function(e){Mt.tree.geometry[1]=e.children[0].geometry,Mt.tree.material[1]=e.children[0].material}))}))}))})),It.load(ve.a,(function(e){e.preload(),new ie.a(Pt).setMaterials(e).load(ye.a,(function(e){Mt.fruit.geometry[0]=e.children[0].geometry,Mt.fruit.material[0]=e.children[0].material}))})),It.load(Ot.a,(function(e){e.preload(),new ie.a(Pt).setMaterials(e).load(vt.a,(function(e){Mt.slector.geometry[0]=e.children[0].geometry,Mt.slector.material[0]=e.children[0].material}))}))}))}}}))(Aa),Ma={isPending:!0,error:"",assets:{},progress:{item:0,of:0}},Pa=Object(m.c)({gameAssetsLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ma,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case se:return Object.assign({},e,{isPending:!1,assets:t.payload});case oe:return Object.assign({},e,{isPending:!0});case ue:return Object.assign({},e,{progress:{item:t.payload.item,of:t.payload.of}});case le:default:return e}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ra=a(105),Ia=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||m.d,_a=Object(m.e)(Pa,Ia(Object(m.a)(s.a)));c.a.render(r.a.createElement((function(e){var t=e.children,a=e.onRedirectCallback,i=void 0===a?w:a,c=Object(E.a)(e,["children","onRedirectCallback"]),o=Object(n.useState)(),l=Object(f.a)(o,2),s=l[0],u=l[1],m=Object(n.useState)(),d=Object(f.a)(m,2),g=d[0],b=d[1],k=Object(n.useState)(),x=Object(f.a)(k,2),S=x[0],j=x[1],N=Object(n.useState)(!0),T=Object(f.a)(N,2),A=T[0],C=T[1],M=Object(n.useState)(!1),P=Object(f.a)(M,2),R=P[0],I=P[1];Object(n.useEffect)((function(){(function(){var e=Object(h.a)(p.a.mark((function e(){var t,a,n,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y()(c);case 2:if(t=e.sent,j(t),!window.location.search.includes("code=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:a=e.sent,n=a.appState,i(n);case 10:return e.next=12,t.isAuthenticated();case 12:if(r=e.sent,u(r),!r){e.next=20;break}return e.next=17,t.getUser();case 17:o=e.sent,b(o),v("Welcome ".concat(o.name),"Login","success");case 20:C(!1);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var _=function(){var e=Object(h.a)(p.a.mark((function e(){var t,a,n=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},I(!0),e.prev=2,e.next=5,S.loginWithPopup(t);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),v("There was a error when logging in!","Login Error","error"),console.error(e.t0);case 11:return e.prev=11,I(!1),e.finish(11);case 14:return e.next=16,S.getUser();case 16:a=e.sent,b(a),u(!0),v("Welcome ".concat(a.name),"Login","success");case 20:case"end":return e.stop()}}),e,null,[[2,7,11,14]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,S.handleRedirectCallback();case 3:return e.next=5,S.getUser();case 5:t=e.sent,C(!1),u(!0),b(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(O.Provider,{value:{isAuthenticated:s,user:g,loading:A,popupOpen:R,loginWithPopup:_,handleRedirectCallback:L,getIdTokenClaims:function(){return S.getIdTokenClaims.apply(S,arguments)},loginWithRedirect:function(){return S.loginWithRedirect.apply(S,arguments)},getTokenSilently:function(){return S.getTokenSilently.apply(S,arguments)},getTokenWithPopup:function(){return S.getTokenWithPopup.apply(S,arguments)},logout:function(){return S.logout.apply(S,arguments)}}},t)}),{domain:Ra.domain,client_id:Ra.clientId,redirect_uri:"http://localhost:3000",onRedirectCallback:function(){l.a.navigate("/")}},r.a.createElement(u.a,{store:_a},r.a.createElement(Ca,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},50:function(e,t,a){},70:function(e,t,a){e.exports=a.p+"static/media/menu.8c6957cc.svg"}},[[215,1,2]]]);
//# sourceMappingURL=main.9e36b3b6.chunk.js.map