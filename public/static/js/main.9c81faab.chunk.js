(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,n,t){e.exports=t(32)},30:function(e,n,t){},31:function(e,n,t){},32:function(e,n,t){"use strict";t.r(n);var a=t(0),i=t.n(a),o=t(6),r=t.n(o),s=t(8),d=t(3),c=t(16),l={isPending:!1,error:"",models:{},config:[]},m=Object(d.c)({gameLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(n.type){case"GAME_LOADING_ERROR":return Object.assign({},e,{error:n.payload,isPending:!1});case"GAME_LOADING_PENDING":return Object.assign({},e,{isPending:!0});case"GAME_LOADING_FINISH":return Object.assign({},e,{isPending:!1,models:n.payload.models,config:n.payload.config});default:return e}}}),u=t(7),h=t(17),f=t(19),g=t(18),w=t(20),p=t(1),y=t(12),x=t(5),v=function e(n){var t=this;Object(u.a)(this,e),this.Cloud=function(e){var n=e.x,a=e.y,i=e.z,o=t.models.cloud,r=new p.Mesh(o.geometry,o.material);return r.name="cloud",r.userData={type:"cloud",faction:"none"},r.position.set(n,a,i),r},this.Water=function(e){var n=e.x,a=e.y,i=e.z,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=t.models.water,s=new p.Mesh(r.geometry,r.material);return s.name="water",s.userData={type:"water",faction:o},s.position.set(n,a,i),s},this.Field=function(e){var n=e.x,a=e.y,i=e.z,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=t.models.field,s=new p.Mesh(r.geometry,r.material);return s.name="base_field",s.userData={type:"field",faction:o,attached:[]},s.position.set(n,a,i),s},this.Ocean=function(e){var n=e.x,a=e.y,i=e.z,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=t.models.ocean,s=new p.Mesh(r.geometry,r.material);return s.name="ocean",s.userData={type:"ocean",faction:o},s.position.set(n,a,i),s},this.Fruit=function(e,n){var a=e.x,i=e.y,o=e.z,r=t.models.fruit,s=new p.Mesh(r.geometry,r.material);return s.name="fruit",s.userData={type:"fruit",faction:n},s.position.set(a,i,o),s},this.models=n},O=(t(30),t(31),function(e){function n(){var e;return Object(u.a)(this,n),(e=Object(f.a)(this,Object(g.a)(n).call(this))).createBlock=function(){var n=new v(e.props.models);e.scene.add(n.Fruit({x:2.5,y:0,z:2.5},"xni-xi")),e.scene.add(n.Fruit({x:3.5,y:0,z:5},"xni-xi")),e.scene.add(n.Fruit({x:.5,y:0,z:1},"xni-xi")),e.scene.add(n.Water({x:-.5,y:0,z:0},"xni-xi")),e.scene.add(n.Water({x:-.5,y:0,z:.5},"xni-xi")),e.scene.add(n.Water({x:-.5,y:0,z:1},"xni-xi")),e.scene.add(n.Ocean({x:-1,y:0,z:0},"xni-xi")),e.scene.add(n.Ocean({x:-1,y:0,z:.5},"xni-xi")),e.scene.add(n.Ocean({x:-1,y:0,z:1},"xni-xi")),e.scene.add(n.Cloud({x:5,y:0,z:5},"xni-xi")),e.scene.add(n.Cloud({x:5,y:0,z:5.5},"xni-xi"));for(var t=0,a=0,i=0,o=0,r=0;t<=121;){for(;a<=11;)e.scene.add(n.Field({x:r,y:0,z:o},"xni-xi")),o+=.5,++a>11&&++i<11&&(a=0,o=0,r+=.5);t++}},e.handleResize=function(n){e.renderer.setSize(window.innerWidth,window.innerHeight),e.camera.aspect=window.innerWidth/window.innerHeight,e.camera.updateProjectionMatrix()},e.start=function(){e.frameId||(e.frameId=requestAnimationFrame(e.animate))},e.stop=function(){cancelAnimationFrame(e.frameId)},e.animate=function(){e.renderScene(),e.frameId=window.requestAnimationFrame(e.animate)},e.renderScene=function(){var n=e.clock.getDelta();e.cameraControls.update(n);e.renderer.render(e.scene,e.camera)},e.state={width:window.innerWidth,height:window.innerHeight},e}return Object(w.a)(n,e),Object(h.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.updateCamera),this.scene=new p.Scene,this.props.loadGameAssets(),y.a.install({THREE:p}),this.renderer=new p.WebGLRenderer({antialias:!0}),this.renderer.shadowMap.enabled=!0,this.renderer.setClearColor("#000000"),this.renderer.setSize(this.state.width,this.state.height),this.raycaster=new p.Raycaster,this.camera=new p.PerspectiveCamera(75,this.state.width/this.state.height,.1,1e3),this.camera.rotation.set(0,0,0),this.camera.position.set(1,1,1),this.clock=new p.Clock,this.cameraControls=new y.a(this.camera,this.renderer.domElement),this.mount.appendChild(this.renderer.domElement),window.addEventListener("resize",this.handleResize);var e=new p.DirectionalLight;e.position.setY(200),this.scene.add(e);var n=new p.HemisphereLight;this.scene.add(n),this.start()}},{key:"componentDidUpdate",value:function(){this.props.isPending||(console.log("Assets Load"),console.log(this.props),this.createBlock())}},{key:"componentWillUnmount",value:function(){this.stop(),this.mount.removeChild(this.renderer.domElement)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"three-scene",ref:function(n){e.mount=n}})}}]),n}(a.Component)),L=Object(s.b)(function(e){return{error:e.gameLoading.error,isPending:e.gameLoading.isPending,models:e.gameLoading.models,config:e.gameLoading.config}},function(e){return{loadGameAssets:function(){return e(function(e){var n={},t=[],a=new p.LoadingManager;a.onStart=function(){e({type:"GAME_LOADING_PENDING"})},a.onLoad=function(){e({type:"GAME_LOADING_FINISH",payload:{models:n,config:t}})},a.onError=function(n){e({type:"GAME_LOADING_ERROR",payload:n})},a.onProgress=function(e,n,t){console.log("Loading file: ".concat(e," .\nLoaded ").concat(n," of ").concat(t," files."))};var i=new p.FileLoader(a).setPath("./config/").setResponseType("json");i.load("block_config.json",function(e){t.push(e)}),i.load("mods.json",function(e){t.push(e)});var o=new x.MTLLoader(a).setPath("./modals/");o.load("field.mtl",function(e){e.preload(),new x.OBJLoader(a).setPath("./modals/").setMaterials(e).load("field.obj",function(e){n.field={geometry:e.children[0].geometry,material:e.children[0].material}})}),o.load("cloud.mtl",function(e){e.preload(),new x.OBJLoader(a).setPath("./modals/").setMaterials(e).load("cloud.obj",function(e){n.cloud={geometry:e.children[0].geometry,material:e.children[0].material}})}),o.load("water.mtl",function(e){e.preload(),new x.OBJLoader(a).setPath("./modals/").setMaterials(e).load("water.obj",function(e){n.water={geometry:e.children[0].geometry,material:e.children[0].material}})}),o.load("ocean.mtl",function(e){e.preload(),new x.OBJLoader(a).setPath("./modals/").setMaterials(e).load("ocean.obj",function(e){n.ocean={geometry:e.children[0].geometry,material:e.children[0].material}})}),o.load("fruit_t_one.mtl",function(e){e.preload(),new x.OBJLoader(a).setPath("./modals/").setMaterials(e).load("fruit_t_one.obj",function(e){n.fruit={geometry:e.children[0].geometry,material:e.children[0].material}})})})}}})(O);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var E=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.d,b=Object(d.e)(m,E(Object(d.a)(c.a)));r.a.render(i.a.createElement(s.a,{store:b},i.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,1,2]]]);
//# sourceMappingURL=main.9c81faab.chunk.js.map